/*!
 * // ==UserScript==
 * // @name         NVR Release
 * // @namespace    http://tampermonkey.net/
 * // @version      0.1
 * // @description  try to take over the world!
 * // @author       You
 * // @match        *://*.moomoo.io/*
 * // @icon         https://media.discordapp.net/attachments/1026024421925855302/1058027305764667452/UMrA0xrKmPkAAAAASUVORK5CYII.png
 * // @grant        none
 * // @run-at       document-start
 * // ==/UserScript==
 */(()=>{var e,t,n,r,i={3365:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});class r{constructor(e,t,n,r,i){this.id=e,this.type=t,this.priority=n,this.executeTick=r,this.data=i}}},451:(e,t,n)=>{"use strict";var r,i;n.d(t,{Q:()=>r,U:()=>i}),function(e){e[e.BIOMEHAT=0]="BIOMEHAT",e[e.AUTOBREAK=1]="AUTOBREAK",e[e.ANTIBULL=2]="ANTIBULL",e[e.ANTIINSTA=3]="ANTIINSTA",e[e.FORCED=4]="FORCED"}(r||(r={})),function(e){e[e.HAT=0]="HAT",e[e.TAIL=1]="TAIL",e[e.ATTACK=2]="ATTACK",e[e.WEAPON=3]="WEAPON"}(i||(i={}))},5946:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{QY:()=>O});var i=n(7187),s=n.n(i),a=n(8973),o=n(8454),c=n(5859),l=n(7110),d=n(1122),u=n(1479),h=n(3365),p=n(451),f=n(1115),m=n(5218),g=n(802),v=n(2150),y=n(8811),w=n(454),E=n(3188),A=n(9294),T=n(436),x=n(4234),M=n(2474),P=n(6036),b=n(8084),k=e([o,y,E,b]);[o,y,E,b]=k.then?(await k)():k;const I=new d.Z("core");Symbol();class O extends(s()){static get ENDPOINT(){return"https://pleasingringedexpertise.gg69gamer.repl.co"}static get VER(){return new class extends String{uformat(){return this.replace(/\./g,"_")}}("1.0.0")}static get AUTHORS(){return["Zaary","Splex"]}actionIdCounter=0;packetBlockIdCounter=0;constructor(){super(),I.info(`launched StarLit core version ${O.VER} by ${O.AUTHORS.join(", ")}`),this.bundleAPI=new A.Z,this.loaded=!1,this.lastUpdate=Date.now(),this.scheduledActions=[],this.lastActionState={hat:0,tail:0,attack:0,aim:0,weapon:0},this.packetBlocks={},this.objectManager=new m.Z,this.playerManager=new x.Z,this.renderManager=null,this.moduleManager=new y.Z,this.tickEngine=new u.a(this),this.packetEngine=new f.z(this),this.interactionEngine=new w.Z(this),this.mouseAngle=0}removePacketInterceptor489(){b.Z.stop()}removePacketInterceptor164(){this.lastUpdate=Date.now(),this.scheduledActions=[],this.lastActionState={hat:0,tail:0,attack:0,aim:0,weapon:0},this.packetBlocks={},this.objectManager=new m.Z,this.playerManager=new x.Z,this.renderManager=null,this.moduleManager=new y.Z,this.tickEngine=new u.a(this),this.packetEngine=new f.z(this),this.interactionEngine=new w.Z(this),this.tickEngine.once("ping",this.packetEngine.handlePing.bind(this.packetEngine)),this.tickEngine.on("pretick",(e=>{this.moduleManager.onPreTick(e),this.runUppermostAction(p.U.HAT,e),this.runUppermostAction(p.U.TAIL,e),this.runUppermostAction(p.U.WEAPON,e),this.runUppermostAction(p.U.ATTACK,e),this.scheduledActions=[]})),this.tickEngine.on("posttick",(e=>{this.moduleManager.onPostTick(e)})),this.tickEngine.on("tick",this.moduleManager.onTick.bind(this.moduleManager)),this.mouseAngle=0,document.addEventListener("keydown",(e=>{this.emit("keydown",e),this.moduleManager.onKeydown(e.keyCode)})),document.addEventListener("keyup",(e=>{this.emit("keyup",e),this.moduleManager.onKeyup(e.keyCode)})),a.Z.on("packetsendp",(e=>{e.type===l.z.BUY_AND_EQUIP?0===e.data[0]&&(e.data[2]?this.lastActionState.tail=e.data[1]:this.lastActionState.hat=e.data[1]):e.type===l.z.ATTACK?(this.lastActionState.attack=e.data[0],this.lastActionState.aim=e.data[1]):e.type===l.z.SET_ANGLE?this.lastActionState.aim=e.data[0]:e.type===l.z.SELECT_ITEM&&e.data[1]&&(this.lastActionState.weapon=e.data[0])})),a.Z.on("packetsend",(e=>{const t=e.getPacket();this.packetBlocks.hasOwnProperty(t.type)&&this.packetBlocks[t.type].length>0?e.cancel():o.w.processOut(e.getPacket())})),a.Z.on("packetreceive",(e=>{o.w.processIn(e.getPacket()),this.moduleManager.onPacketReceive(e)})),setInterval(this.update.bind(this),1),this.loaded=!0,b.Z.stop()}patchBundle(e,t){E.Z.loadBundle(e,this.bundleAPI,t)}async initializeRenderer(e){this.renderManager=new g.Z(this,e,1920,1080),await this.renderManager.createInterfaceRenderer("packetCount",v.Z,this),await this.renderManager.createInterfaceRenderer("packetGraph",T.Z,this),this.renderManager.createRenderHook(),this.renderManager.on("mousemove",(e=>{this.mouseAngle=M.Z.getDirection(new P.Z(window.innerWidth/2,window.innerHeight/2),new P.Z(e.clientX,e.clientY))}))}update(){const e=Date.now(),t=e-this.lastUpdate;this.lastUpdate=e,this.emit("update",t),this.playerManager.update(t),this.objectManager.update(t),this.moduleManager.onUpdate(t)}createPacketBlock(e){const t=this.packetBlockIdCounter++;return this.packetBlocks.hasOwnProperty(e)||(this.packetBlocks[e]=[]),this.packetBlocks[e].push(t),t}removePacketBlock(e,t){const n=this.packetBlocks[e].indexOf(t);n>-1&&this.packetBlocks[e].splice(n,1)}runUppermostAction(e,t){const n=this.scheduledActions.filter((n=>n.type==e&&n.executeTick==t&&(()=>!(n.type===p.U.HAT&&!this.playerManager.myPlayer.ownedHats.includes(n.data[0]))&&(!(n.type===p.U.TAIL&&!this.playerManager.myPlayer.ownedTails.includes(n.data[0]))&&!(n.type===p.U.WEAPON&&!this.playerManager.myPlayer.inventory.hasWeapon(n.data[0]))))())).sort(((e,t)=>t.priority-e.priority));if(n.length>0){const e=n[0];this.runAction(e);const t=this.scheduledActions.indexOf(e);t>-1&&this.scheduledActions.splice(t,1)}}runAction(e){switch(e.type){case p.U.HAT:if(e.data[0]===this.lastActionState.hat)return;a.Z.send(new c.W(l.z.BUY_AND_EQUIP,[0,e.data[0],0]));break;case p.U.TAIL:if(e.data[0]===this.lastActionState.tail)return;a.Z.send(new c.W(l.z.BUY_AND_EQUIP,[0,e.data[0],1]));break;case p.U.ATTACK:if(e.data[0]===this.lastActionState.attack&&e.data[1]===this.lastActionState.aim)return;a.Z.send(new c.W(l.z.ATTACK,e.data));break;case p.U.WEAPON:if(e.data[0]===this.lastActionState.weapon)return;a.Z.send(new c.W(l.z.SELECT_ITEM,[e.data[0],!0]));default:return}this.moduleManager.onActionRun(e)}scheduleAction(e,t,n=this.tickEngine.tickIndex+1,r){const i=new h.a(this.actionIdCounter++,e,t,n,r);return this.scheduledActions.push(i),i.id}}r()}catch(e){r(e)}}))},151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),e=n.hmd(e);const r={maxScreenWidth:1920,maxScreenHeight:1080,serverUpdateRate:9,maxPlayers:40,maxPlayersHard:50,collisionDepth:6,minimapRate:3e3,colGrid:10,clientSendRate:5,healthBarWidth:50,iconPadding:15,iconPad:.9,deathFadeout:3e3,crownIconScale:60,crownPad:35,chatCountdown:3e3,chatCooldown:500,inSandbox:-1!=window.location.origin.indexOf("sandbox"),maxAge:100,gatherAngle:Math.PI/2.6,gatherWiggle:10,hitReturnRatio:.25,hitAngle:Math.PI/2,playerScale:35,playerSpeed:.0016,playerDecel:.993,nameY:34,skinColors:["#bf8f54","#cbb091","#896c4b","#fadadc","#ececec","#c37373","#4c4c4c","#ecaff7","#738cc3","#8bc373"],animalCount:7,aiTurnRandom:.06,cowNames:["Sid","Steph","Bmoe","Romn","Jononthecool","Fiona","Vince","Nathan","Nick","Flappy","Ronald","Otis","Pepe","Mc Donald","Theo","Fabz","Oliver","Jeff","Jimmy","Helena","Reaper","Ben","Alan","Naomi","XYZ","Clever","Jeremy","Mike","Destined","Stallion","Allison","Meaty","Sophia","Vaja","Joey","Pendy","Murdoch","Theo","Jared","July","Sonia","Mel","Dexter","Quinn","Milky"],shieldAngle:Math.PI/3,weaponVariants:[{id:0,src:"",xp:0,val:1},{id:1,src:"_g",xp:3e3,val:1.1},{id:2,src:"_d",xp:7e3,val:1.18},{id:3,src:"_r",poison:!0,xp:12e3,val:1.18}],fetchVariant:function(t){for(var n=t.weaponXP[t.weaponIndex]||0,i=e.exports.weaponVariants.length-1;i>=0;--i)if(n>=e.exports.weaponVariants[i].xp)return r.weaponVariants[i]},resourceTypes:["wood","food","stone","points"],areaCount:7,treesPerArea:9,bushesPerArea:3,totalRocks:32,goldOres:7,riverWidth:724,riverPadding:114,waterCurrent:.0011,waveSpeed:1e-4,waveMax:1.3,treeScales:[150,160,165,175],bushScales:[80,85,95],rockScales:[80,85,90],snowBiomeTop:2400,snowSpeed:.75,maxNameLength:15,mapScale:14400,mapPingScale:40,mapPingTime:2200},i=r},4569:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});const r=[{id:0,name:"food",place:!1,limit:-1,layer:0},{id:1,name:"walls",place:!0,limit:30,layer:0},{id:2,name:"spikes",place:!0,limit:15,layer:0},{id:3,name:"mill",place:!0,limit:7,layer:1},{id:4,name:"mine",place:!0,limit:1,layer:0},{id:5,name:"trap",place:!0,limit:6,layer:-1},{id:6,name:"booster",place:!0,limit:12,layer:-1},{id:7,name:"turret",place:!0,limit:2,layer:1},{id:8,name:"watchtower",place:!0,limit:12,layer:1},{id:9,name:"buff",place:!0,limit:4,layer:-1},{id:10,name:"spawn",place:!0,limit:1,layer:-1},{id:11,name:"sapling",place:!0,limit:2,layer:0},{id:12,name:"blocker",place:!0,limit:3,layer:-1},{id:13,name:"teleporter",place:!0,limit:2,layer:-1}],i=[{id:-1,group:r[0],name:"apple",desc:"restores 20 health when consumed",req:["food",10],scale:22,holdOffset:15},{id:-1,age:3,group:r[0],name:"cookie",desc:"restores 40 health when consumed",req:["food",15],scale:27,holdOffset:15},{id:-1,age:7,group:r[0],name:"cheese",desc:"restores 30 health and another 50 over 5 seconds",req:["food",25],scale:27,holdOffset:15},{id:-1,group:r[1],name:"wood wall",desc:"provides protection for your village",req:["wood",10],projDmg:!0,health:380,scale:50,holdOffset:20,placeOffset:-5},{id:-1,age:3,group:r[1],name:"stone wall",desc:"provides improved protection for your village",req:["stone",25],health:900,scale:50,holdOffset:20,placeOffset:-5},{id:-1,age:7,pre:1,group:r[1],name:"castle wall",desc:"provides powerful protection for your village",req:["stone",35],health:1500,scale:52,holdOffset:20,placeOffset:-5},{id:-1,group:r[2],name:"spikes",desc:"damages enemies when they touch them",req:["wood",20,"stone",5],health:400,dmg:20,scale:49,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:-1,age:5,group:r[2],name:"greater spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",10],health:500,dmg:35,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:-1,age:9,pre:1,group:r[2],name:"poison spikes",desc:"poisons enemies when they touch them",req:["wood",35,"stone",15],health:600,dmg:30,pDmg:5,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:-1,age:9,pre:2,group:r[2],name:"spinning spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",20],health:500,dmg:45,turnSpeed:.003,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:-1,group:r[3],name:"windmill",desc:"generates gold over time",req:["wood",50,"stone",10],health:400,pps:1,turnSpeed:.0016,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5},{id:-1,age:5,pre:1,group:r[3],name:"faster windmill",desc:"generates more gold over time",req:["wood",60,"stone",20],health:500,pps:1.5,turnSpeed:.0025,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5},{id:-1,age:8,pre:1,group:r[3],name:"power mill",desc:"generates more gold over time",req:["wood",100,"stone",50],health:800,pps:2,turnSpeed:.005,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5},{id:-1,age:5,group:r[4],type:2,name:"mine",desc:"allows you to mine stone",req:["wood",20,"stone",100],iconLineMult:12,scale:65,holdOffset:20,placeOffset:0},{id:-1,age:5,group:r[11],type:0,name:"sapling",desc:"allows you to farm wood",req:["wood",150],iconLineMult:12,colDiv:.5,scale:110,holdOffset:50,placeOffset:-15},{id:-1,age:4,group:r[5],name:"pit trap",desc:"pit that traps enemies if they walk over it",req:["wood",30,"stone",30],trap:!0,ignoreCollision:!0,hideFromEnemy:!0,health:500,colDiv:.2,scale:50,holdOffset:20,placeOffset:-5},{id:-1,age:4,group:r[6],name:"boost pad",desc:"provides boost when stepped on",req:["stone",20,"wood",5],ignoreCollision:!0,boostSpeed:1.5,health:150,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5},{id:-1,age:7,group:r[7],doUpdate:!0,name:"turret",desc:"defensive structure that shoots at enemies",req:["wood",200,"stone",150],health:800,projectile:1,shootRange:700,shootRate:2200,scale:43,holdOffset:20,placeOffset:-5},{id:-1,age:7,group:r[8],name:"platform",desc:"platform to shoot over walls and cross over water",req:["wood",20],ignoreCollision:!0,zIndex:1,health:300,scale:43,holdOffset:20,placeOffset:-5},{id:-1,age:7,group:r[9],name:"healing pad",desc:"standing on it will slowly heal you",req:["wood",30,"food",10],ignoreCollision:!0,healCol:15,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5},{id:-1,age:9,group:r[10],name:"spawn pad",desc:"you will spawn here when you die but it will dissapear",req:["wood",100,"stone",100],health:400,ignoreCollision:!0,spawnPoint:!0,scale:45,holdOffset:20,placeOffset:-5},{id:-1,age:7,group:r[12],name:"blocker",desc:"blocks building in radius",req:["wood",30,"stone",25],ignoreCollision:!0,blocker:300,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5},{id:-1,age:7,group:r[13],name:"teleporter",desc:"teleports you to a random point on the map",req:["wood",60,"stone",60],ignoreCollision:!0,teleport:!0,health:200,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5}];for(var s=0;s<i.length;++s)Object.defineProperty(i[s],"id",{value:s}),i[s].pre&&(i[s].pre=s-i[s].pre);const a={groups:r,projectiles:[{indx:0,layer:0,src:"arrow_1",dmg:25,speed:1.6,scale:103,range:1e3},{indx:1,layer:1,dmg:25,scale:20},{indx:0,layer:0,src:"arrow_1",dmg:35,speed:2.5,scale:103,range:1200},{indx:0,layer:0,src:"arrow_1",dmg:30,speed:2,scale:103,range:1200},{indx:1,layer:1,dmg:16,scale:20},{indx:0,layer:0,src:"bullet_1",dmg:50,speed:3.6,scale:160,range:1400}],list:i}},7884:(e,t,n)=>{"use strict";n.d(t,{Vl:()=>a,WD:()=>o});var r=n(6036),i=n(4569);class s{dir=0;scale=0;wiggles=[];gridLocations=[];constructor(e,t,n,i,s){this.sid=e,this.type=t,this.position=n,this.dir=i,this.scale=s,this.wiggle=new r.Z(0,0)}update(e){this.wiggle.isNull()||this.wiggle.multiply(Math.pow(.99,e))}getScale(e=!1){return this instanceof a?0===this.type?.6*this.scale:this.scale:this.scale*(e?1:i.e.list[this.type].colDiv??1)}}class a extends s{constructor(e,t,n,r,i){super(e,i,t,n,r),this.type=i}}class o extends s{constructor(e,t,n,r,s,a){super(e,s,t,n,r),this.stats=i.e.list[s],this.owner={sid:a},this.meta={shouldUpdate:3===this.stats.group.id},this.health=this.stats.health??1}update(e){super.update(e),this.stats.turnSpeed&&(this.dir+=this.stats.turnSpeed*e)}}},2685:(e,t,n)=>{"use strict";n.d(t,{D:()=>r}),e=n.hmd(e);const r={randInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},randFloat:function(e,t){return Math.random()*(t-e+1)+e},lerp:function(e,t,n){return e+(t-e)*n},decel:function(e,t){return e>0?e=Math.max(0,e-t):e<0&&(e=Math.min(0,e+t)),e},getDistance:function(e,t,n,r){return Math.sqrt((n-=e)*n+(r-=t)*r)},getDirection:function(e,t,n,r){return Math.atan2(t-r,e-n)},getAngleDist:function(e,t){var n=Math.abs(t-e)%(2*Math.PI);return n>Math.PI?2*Math.PI-n:n},isNumber:function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},isString:function(e){return e&&"string"==typeof e},kFormat:function(e){return e>999?(e/1e3).toFixed(1)+"k":e},capitalizeFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},fixTo:function(e,t){return parseFloat(e.toFixed(t))},sortByPoints:function(e,t){return parseFloat(t.points)-parseFloat(e.points)},lineInRect:function(e,t,n,r,i,s,a,o){var c=i,l=a;if(i>a&&(c=a,l=i),l>n&&(l=n),c<e&&(c=e),c>l)return!1;var d=s,u=o,h=a-i;if(Math.abs(h)>1e-7){var p=(o-s)/h,f=s-p*i;d=p*c+f,u=p*l+f}if(d>u){var m=u;u=d,d=m}return u>r&&(u=r),d<t&&(d=t),!(d>u)},containsPoint:function(e,t,n){var r=e.getBoundingClientRect(),i=r.left+window.scrollX,s=r.top+window.scrollY,a=r.width,o=r.height;return t>i&&t<i+a&&(n>s&&n<s+o)},mousifyTouchEvent:function(e){var t=e.changedTouches[0];e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY},removeAllChildren:function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},generateElement:function(t){var n=document.createElement(t.tag||"div");function r(e,r){t[e]&&(n[r]=t[e])}for(var i in r("text","textContent"),r("html","innerHTML"),r("class","className"),t){switch(i){case"tag":case"text":case"html":case"class":case"style":case"hookTouch":case"parent":case"children":continue}n[i]=t[i]}if(n.onclick&&(n.onclick=e.exports.checkTrusted(n.onclick)),n.onmouseover&&(n.onmouseover=e.exports.checkTrusted(n.onmouseover)),n.onmouseout&&(n.onmouseout=e.exports.checkTrusted(n.onmouseout)),t.style&&(n.style.cssText=t.style),t.hookTouch&&e.exports.hookTouchEvents(n),t.parent&&t.parent.appendChild(n),t.children)for(var s=0;s<t.children.length;s++)n.appendChild(t.children[s]);return n},eventIsTrusted:function(e){return!e||"boolean"!=typeof e.isTrusted||e.isTrusted},checkTrusted:function(t){return function(n){n&&n instanceof Event&&e.exports.eventIsTrusted(n)&&t(n)}},randomString:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},countInArray:function(e,t){for(var n=0,r=0;r<e.length;r++)e[r]===t&&n++;return n}}},3661:(e,t,n)=>{"use strict";n.d(t,{rZ:()=>m,F8:()=>p,J5:()=>f});const r=[{id:12,name:"Snowball",price:1e3,scale:105,xOff:18,desc:"no effect"},{id:9,name:"Tree Cape",price:1e3,scale:90,desc:"no effect"},{id:10,name:"Stone Cape",price:1e3,scale:90,desc:"no effect"},{id:3,name:"Cookie Cape",price:1500,scale:90,desc:"no effect"},{id:8,name:"Cow Cape",price:2e3,scale:90,desc:"no effect"},{id:11,name:"Monkey Tail",price:2e3,scale:97,xOff:25,desc:"Super speed but reduced damage",spdMult:1.35,dmgMultO:.2},{id:17,name:"Apple Basket",price:3e3,scale:80,xOff:12,desc:"slowly regenerates health over time",healthRegen:1},{id:6,name:"Winter Cape",price:3e3,scale:90,desc:"no effect"},{id:4,name:"Skull Cape",price:4e3,scale:90,desc:"no effect"},{id:5,name:"Dash Cape",price:5e3,scale:90,desc:"no effect"},{id:2,name:"Dragon Cape",price:6e3,scale:90,desc:"no effect"},{id:1,name:"Super Cape",price:8e3,scale:90,desc:"no effect"},{id:7,name:"Troll Cape",price:8e3,scale:90,desc:"no effect"},{id:14,name:"Thorns",price:1e4,scale:115,xOff:20,desc:"no effect"},{id:15,name:"Blockades",price:1e4,scale:95,xOff:15,desc:"no effect"},{id:20,name:"Devils Tail",price:1e4,scale:95,xOff:20,desc:"no effect"},{id:16,name:"Sawblade",price:12e3,scale:90,spin:!0,xOff:0,desc:"deal damage to players that damage you",dmg:.15},{id:13,name:"Angel Wings",price:15e3,scale:138,xOff:22,desc:"slowly regenerates health over time",healthRegen:3},{id:19,name:"Shadow Wings",price:15e3,scale:138,xOff:22,desc:"increased movement speed",spdMult:1.1},{id:18,name:"Blood Wings",price:2e4,scale:178,xOff:26,desc:"restores health when you deal damage",healD:.2},{id:21,name:"Corrupt X Wings",price:2e4,scale:178,xOff:26,desc:"deal damage to players that damage you",dmg:.25}];var i=n(151);const s=[{id:45,name:"Shame!",dontSell:!0,price:0,scale:120,desc:"hacks are for losers"},{id:51,name:"Moo Cap",price:0,scale:120,desc:"coolest mooer around"},{id:50,name:"Apple Cap",price:0,scale:120,desc:"apple farms remembers"},{id:28,name:"Moo Head",price:0,scale:120,desc:"no effect"},{id:29,name:"Pig Head",price:0,scale:120,desc:"no effect"},{id:30,name:"Fluff Head",price:0,scale:120,desc:"no effect"},{id:36,name:"Pandou Head",price:0,scale:120,desc:"no effect"},{id:37,name:"Bear Head",price:0,scale:120,desc:"no effect"},{id:38,name:"Monkey Head",price:0,scale:120,desc:"no effect"},{id:44,name:"Polar Head",price:0,scale:120,desc:"no effect"},{id:35,name:"Fez Hat",price:0,scale:120,desc:"no effect"},{id:42,name:"Enigma Hat",price:0,scale:120,desc:"join the enigma army"},{id:43,name:"Blitz Hat",price:0,scale:120,desc:"hey everybody i'm blitz"},{id:49,name:"Bob XIII Hat",price:0,scale:120,desc:"like and subscribe"},{id:57,name:"Pumpkin",price:50,scale:120,desc:"Spooooky"},{id:8,name:"Bummle Hat",price:100,scale:120,desc:"no effect"},{id:2,name:"Straw Hat",price:500,scale:120,desc:"no effect"},{id:15,name:"Winter Cap",price:600,scale:120,desc:"allows you to move at normal speed in snow",coldM:1},{id:5,name:"Cowboy Hat",price:1e3,scale:120,desc:"no effect"},{id:4,name:"Ranger Hat",price:2e3,scale:120,desc:"no effect"},{id:18,name:"Explorer Hat",price:2e3,scale:120,desc:"no effect"},{id:31,name:"Flipper Hat",price:2500,scale:120,desc:"have more control while in water",watrImm:!0},{id:1,name:"Marksman Cap",price:3e3,scale:120,desc:"increases arrow speed and range",aMlt:1.3},{id:10,name:"Bush Gear",price:3e3,scale:160,desc:"allows you to disguise yourself as a bush"},{id:48,name:"Halo",price:3e3,scale:120,desc:"no effect"},{id:6,name:"Soldier Helmet",price:4e3,scale:120,desc:"reduces damage taken but slows movement",spdMult:.94,dmgMult:.75},{id:23,name:"Anti Venom Gear",price:4e3,scale:120,desc:"makes you immune to poison",poisonRes:1},{id:13,name:"Medic Gear",price:5e3,scale:110,desc:"slowly regenerates health over time",healthRegen:3},{id:9,name:"Miners Helmet",price:5e3,scale:120,desc:"earn 1 extra gold per resource",extraGold:1},{id:32,name:"Musketeer Hat",price:5e3,scale:120,desc:"reduces cost of projectiles",projCost:.5},{id:7,name:"Bull Helmet",price:6e3,scale:120,desc:"increases damage done but drains health",healthRegen:-5,dmgMultO:1.5,spdMult:.96},{id:22,name:"Emp Helmet",price:6e3,scale:120,desc:"turrets won't attack but you move slower",antiTurret:1,spdMult:.7},{id:12,name:"Booster Hat",price:6e3,scale:120,desc:"increases your movement speed",spdMult:1.16},{id:26,name:"Barbarian Armor",price:8e3,scale:120,desc:"knocks back enemies that attack you",dmgK:.6},{id:21,name:"Plague Mask",price:1e4,scale:120,desc:"melee attacks deal poison damage",poisonDmg:5,poisonTime:6},{id:46,name:"Bull Mask",price:1e4,scale:120,desc:"bulls won't target you unless you attack them",bullRepel:1},{id:14,name:"Windmill Hat",topSprite:!0,price:1e4,scale:120,desc:"generates points while worn",pps:1.5},{id:11,name:"Spike Gear",topSprite:!0,price:1e4,scale:120,desc:"deal damage to players that damage you",dmg:.45},{id:53,name:"Turret Gear",topSprite:!0,price:1e4,scale:120,desc:"you become a walking turret",turret:{proj:1,range:700,rate:2500},spdMult:.7},{id:20,name:"Samurai Armor",price:12e3,scale:120,desc:"increased attack speed and fire rate",atkSpd:.78},{id:58,name:"Dark Knight",price:12e3,scale:120,desc:"restores health when you deal damage",healD:.4},{id:27,name:"Scavenger Gear",price:15e3,scale:120,desc:"earn double points for each kill",kScrM:2},{id:40,name:"Tank Gear",price:15e3,scale:120,desc:"increased damage to buildings but slower movement",spdMult:.3,bDmg:3.3},{id:52,name:"Thief Gear",price:15e3,scale:120,desc:"steal half of a players gold when you kill them",goldSteal:.5},{id:55,name:"Bloodthirster",price:2e4,scale:120,desc:"Restore Health when dealing damage. And increased damage",healD:.25,dmgMultO:1.2},{id:56,name:"Assassin Gear",price:2e4,scale:120,desc:"Go invisible when not moving. Can't eat. Increased speed",noEat:!0,spdMult:1.1,invisTimer:1e3}];var a=n(4569),o=n(6036),c=n(2237),l=n(2474);class d{static CONFIG={playerDecel:.993,snowBiomeTop:2400,snowSpeed:.75,mapScale:14400,riverHeight:724,waterPush:.0011,playerSpeed:.0016};constructor(e){this.player=e,this.lockMove=!1,this.slowMult=1}possibleMoveDirectionsKeyboard(){return[0,45,90,135,180,225,270,315].map((e=>e*(Math.PI/180)))}update(e){this.predict(e,void 0,this.player.serverPos)}deepPredict(e,t,n){let r={position:void 0,velocity:void 0};for(let i=0;i<e;i+=t)r=this.predict(t,n,r.position,r.velocity);return r}predict(e,t,n,r){const i=n??this.player.serverPos,s=r??this.player.serverPos.clone().subtract(this.player.lastTickServerPos);if(t=t??l.Z.getDirection(this.player.lastTickServerPos,this.player.serverPos),this.slowMult<1&&(this.slowMult+=8e-4*e,this.slowMult>1&&(this.slowMult=1)),this.lockMove)s.set(0,0);else{let n=(this.player.inventory.heldItem instanceof c.LW?1:.5)*this.player.inventory.weaponSelected.stats.speedMultiplier*this.slowMult;/*!this.player.zIndex && */this.isInWater()&&(n*=.33,s.x+=d.CONFIG.waterPush*e);let r=Math.cos(t),i=Math.sin(t);const a=Math.sqrt(r*r+i*i);0!=a&&(r/=a,i/=a),s.x+=r*n*e*d.CONFIG.playerSpeed,s.y+=i*n*e*d.CONFIG.playerSpeed}return s.multiply(Math.pow(d.CONFIG.playerDecel,e)),i.add(s),console.log(i),{position:i,velocity:s}}isInSnow(){return this.player.serverPos.y<=d.CONFIG.snowBiomeTop}isInWater(){return this.player.serverPos.y>=d.CONFIG.mapScale/2-d.CONFIG.riverHeight/2&&this.player.serverPos.y<=d.CONFIG.mapScale/2+d.CONFIG.riverHeight/2}}var u,h=n(7884);!function(e){e[e.BUILDING_BREAK=0]="BUILDING_BREAK",e[e.MOVEMENT_SPEED=1]="MOVEMENT_SPEED"}(u||(u={}));class p{static WeaponFinders=u;constructor(e){this.player=e,this.weapons=[c.Ir.TOOL_HAMMER,null],this.reloads=Object.fromEntries(new Array(c.Qc.length).fill(void 0).map(((e,t)=>[t,0]))),this.items=[0,3,6,10],this.heldItem=c.Ir.TOOL_HAMMER,this.weaponSelected=c.Ir.TOOL_HAMMER}reset(){this.weapons=[c.Ir.TOOL_HAMMER,null],this.reloads=Object.fromEntries(new Array(c.Qc.length).fill(void 0).map(((e,t)=>[t,0]))),this.items=[0,3,6,10],this.heldItem=c.Ir.TOOL_HAMMER,this.weaponSelected=c.Ir.TOOL_HAMMER}setWeapons(e){this.weapons=[c.Qc[e[0]],c.Qc[e[1]]]}setItems(e){this.items=e}resetReload(e){this.reloads[e.id]=e.stats.reloadTime}updateReloads(e){if(!(this.heldItem instanceof c.LW))return;const t=this.heldItem.id;this.reloads[t]>0&&(this.reloads[t]-=e,this.reloads[t]<=0&&(this.reloads[t]=0))}isReloaded(e){}remainingReloadTime(e){return this.reloads[this.weapons[e]?.id]}findBestWeapon(e){switch(e){case u.BUILDING_BREAK:return this.weapons.flat(1).filter((e=>null!==e&&e instanceof c.ZC)).sort(((e,t)=>t.stats.dmg*t.stats.buildingDmgMultiplier-e.stats.dmg*e.stats.buildingDmgMultiplier))[0];case u.MOVEMENT_SPEED:return this.weapons.flat(1).filter((e=>null!==e)).sort(((e,t)=>t.stats.speedMultiplier-e.stats.speedMultiplier))[0]}}getWeapon(e){return this.weapons[e]}hasWeapon(e){const t="number"==typeof e?c.Qc[e]:e;return this.weapons[0].id===t.id||this.weapons[1]&&this.weapons[1].id===t.id}}class f{dir=0;maxHealth=100;health=this.maxHealth;scale=i.Z.playerScale;speed=i.Z.playerSpeed;reloads={};visible=!1;constructor(e,t,n,r,i,s,a,c,l){this.id=e,this.sid=t,this.name=n,this.serverPos=new o.Z,this.lastTickServerPos=new o.Z,this.renderPos=r,this.lerpPos=new o.Z,this.velocity=new o.Z,this.dir=i,this.health=s,this.maxHealth=a,this.scale=c,this.skinColor=l,this.team=null,this.lastTickPosX=0,this.lastTickPosY=0,this.inventory=new p(this),this.movementProcessor=new d(this),this.state={isTrapped:!1,buildIndex:-1,data:{trap:void 0}}}updatePlayer(e,t,n,r,i,s,d,u,p,f,m,g,v){this.lerpPos=this.renderPos.clone(),this.lastTickServerPos=this.serverPos.clone(),this.serverPos=new o.Z(t,n),this.velocity=this.serverPos.clone().subtract(this.lastTickServerPos),this.dir=r,this.state.buildIndex=i;const y=-1===i;this.inventory.heldItem=y?c.Qc[s]:a.e.list[i],this.inventory.weaponSelected=c.Qc[s],this.dt=0,this.state.isTrapped=!1,this.state.data.trap=void 0;const w=e.getGridArrays(this.serverPos.x,this.serverPos.y,this.scale+2*this.velocity.length()).flat(1);for(let e=0;e<w.length;e++){const t=w[e];if(t instanceof h.Vl)continue;const n=l.Z.getDistance(this.serverPos,t.position)<this.scale+t.getScale();15===t.type&&n&&t.owner.sid!==this.sid&&(this.state.isTrapped=!0,this.state.data.trap=t)}}updateData(e,t,n,r,i,s,a,o,c){this.id=e,this.sid=t,this.name=n,this.serverPos=r,this.dir=i,this.health=s,this.maxHealth=a,this.scale=o,this.skinColor=c}}class m extends f{constructor(e,t,n,i,a,o,c,l,d){super(e,t,n,i,a,o,c,l,d),this.alive=!1,this.isAttacking=!1,this.ownedHats=s.filter((e=>0===e.price)).map((e=>e.id)),this.ownedTails=r.filter((e=>0===e.price)).map((e=>e.id))}}},2237:(e,t,n)=>{"use strict";var r,i;n.d(t,{HQ:()=>i,Ir:()=>c,LW:()=>s,Qc:()=>l,ZC:()=>a,mq:()=>o}),function(e){e[e.TOOL_HAMMER=0]="TOOL_HAMMER",e[e.HAND_AXE=1]="HAND_AXE",e[e.GREAT_AXE=2]="GREAT_AXE",e[e.SHORT_SWORD=3]="SHORT_SWORD",e[e.KATANA=4]="KATANA",e[e.POLEARM=5]="POLEARM",e[e.BAT=6]="BAT",e[e.DAGGERS=7]="DAGGERS",e[e.STICK=8]="STICK",e[e.HUNTING_BOW=9]="HUNTING_BOW",e[e.GREAT_HAMMER=10]="GREAT_HAMMER",e[e.SHIELD=11]="SHIELD",e[e.CROSSBOW=12]="CROSSBOW",e[e.REPEATER_CROSSBOW=13]="REPEATER_CROSSBOW",e[e.MC_GRABBY=14]="MC_GRABBY",e[e.MUSKET=15]="MUSKET"}(r||(r={})),function(e){e[e.PRIMARY=0]="PRIMARY",e[e.SECONDARY=1]="SECONDARY"}(i||(i={}));class s{constructor(e,t,n,r){this.id=e,this.slot=t,this.type=n,this.stats=r}}class a extends s{constructor(e,t,n,r){super(e,t,n,r),this.stats=r}}class o extends s{constructor(e,t,n,r){super(e,t,n,r),this.stats=r}}const c={TOOL_HAMMER:new a(0,i.PRIMARY,r.TOOL_HAMMER,{dmg:25,buildingDmgMultiplier:1,range:65,reloadTime:300,speedMultiplier:1}),HAND_AXE:new a(1,i.PRIMARY,r.HAND_AXE,{dmg:30,buildingDmgMultiplier:1,range:70,reloadTime:400,speedMultiplier:1}),GREAT_AXE:new a(2,i.PRIMARY,r.GREAT_AXE,{dmg:35,buildingDmgMultiplier:1,range:75,reloadTime:400,speedMultiplier:1}),SHORT_SWORD:new a(3,i.PRIMARY,r.SHORT_SWORD,{dmg:35,buildingDmgMultiplier:1,range:110,reloadTime:300,speedMultiplier:.85}),KATANA:new a(4,i.PRIMARY,r.KATANA,{dmg:40,buildingDmgMultiplier:1,range:118,reloadTime:300,speedMultiplier:.8}),POLEARM:new a(5,i.PRIMARY,r.POLEARM,{dmg:45,buildingDmgMultiplier:1,range:142,reloadTime:700,speedMultiplier:.82}),BAT:new a(6,i.PRIMARY,r.BAT,{dmg:20,buildingDmgMultiplier:1,range:110,reloadTime:300,speedMultiplier:1}),DAGGERS:new a(7,i.PRIMARY,r.DAGGERS,{dmg:20,buildingDmgMultiplier:1,range:65,reloadTime:100,speedMultiplier:1.13}),STICK:new a(8,i.PRIMARY,r.STICK,{dmg:1,buildingDmgMultiplier:1,range:70,reloadTime:400,speedMultiplier:1}),HUNTING_BOW:new o(9,i.SECONDARY,r.HUNTING_BOW,{range:1e3,speedMultiplier:.75,reloadTime:600}),GREAT_HAMMER:new a(10,i.SECONDARY,r.GREAT_HAMMER,{dmg:10,buildingDmgMultiplier:7.5,range:75,reloadTime:400,speedMultiplier:1}),SHIELD:new a(11,i.SECONDARY,r.SHIELD,{dmg:0,buildingDmgMultiplier:1,range:0,reloadTime:0,speedMultiplier:.7}),CROSSBOW:new o(12,i.SECONDARY,r.CROSSBOW,{range:1200,speedMultiplier:.7,reloadTime:700}),REPEATER_CROSSBOW:new o(13,i.SECONDARY,r.REPEATER_CROSSBOW,{range:1200,speedMultiplier:.7,reloadTime:230}),MC_GRABBY:new a(14,i.SECONDARY,r.MC_GRABBY,{dmg:0,buildingDmgMultiplier:1,range:125,reloadTime:700,speedMultiplier:1.05}),MUSKET:new o(15,i.SECONDARY,r.MUSKET,{range:1400,speedMultiplier:.6,reloadTime:1500})},l=Object.values(c)},8811:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>f});var i=n(1122),s=n(5471),a=n(8962),o=n(2692),c=n(4097),l=n(2195),d=n(9951),u=n(6891),h=e([s,a,o,c,l,d,u]);[s,a,o,c,l,d,u]=h.then?(await h)():h;const p=new i.Z("module-manager");class f{static classes=[s.Z,a.Z,o.Z,c.Z,l.Z,d.Z,u.Z];modules=[];constructor(){for(const e of f.classes)this.modules.push(Reflect.construct(e,[]));p.info(`loaded ${this.modules.length} modules`)}onUpdate(e){for(const t of this.modules)t.onUpdate(e)}onPreTick(e){for(const t of this.modules)t.onPreTick(e)}onTick(e){for(const t of this.modules)t.onTick(e)}onPostTick(e){for(const t of this.modules)t.onPostTick(e)}onKeydown(e){for(const t of this.modules)t.onKeydown(e)}onKeyup(e){for(const t of this.modules)t.onKeyup(e)}onPacketReceive(e){for(const t of this.modules)e.isCanceled()||t.onPacketReceive(e)}onRender(e){for(const t of this.modules)t.onRender(e)}onActionRun(e){for(const t of this.modules)t.onActionRun(e)}onBuildingHit(e,t,n){for(const r of this.modules)r.onBuildingHit(e,t,n)}getModule(e){for(const t of this.modules)if(t instanceof e)return t}}r()}catch(e){r(e)}}))},3584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{onUpdate(e){}onPreTick(e){}onTick(e){}onPostTick(e){}onKeydown(e){}onKeyup(e){}onPacketReceive(e){}onRender(e){}onActionRun(e){}onBuildingHit(e,t,n){}}},5471:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i=n(451),s=n(3661),a=n(1505),o=n(7110),c=n(2474),l=n(3584),d=e([a]);a=(d.then?(await d)():d)[0];class u extends l.Z{constructor(){super(),this.wasBreaking=!1,this.stopAttackActionId=void 0,this.packetBlockerId=void 0,this.currentTrap=null}onPreTick(e){const t=a.v.playerManager.myPlayer;if(t.alive)if(t.state.isTrapped){if(this.currentTrap||(this.currentTrap=t.state.data.trap),this.currentTrap){void 0===this.packetBlockerId&&(this.packetBlockerId=a.v.createPacketBlock(o.z.SET_ANGLE));const n=t.inventory.findBestWeapon(s.F8.WeaponFinders.BUILDING_BREAK);if(0===t.inventory.reloads[n.id]){const r=c.Z.getDirection(t.serverPos,this.currentTrap.position);a.v.scheduleAction(i.U.WEAPON,i.Q.AUTOBREAK,e,[n?.id]),a.v.scheduleAction(i.U.ATTACK,i.Q.AUTOBREAK,e,[1,r]),a.v.scheduleAction(i.U.HAT,i.Q.AUTOBREAK,e,[40])}else a.v.scheduleAction(i.U.WEAPON,i.Q.AUTOBREAK,e,[n?.id]),a.v.scheduleAction(i.U.HAT,i.Q.AUTOBREAK,e,[20]);this.wasBreaking=!0}}else this.wasBreaking&&(this.stopAttackActionId=a.v.scheduleAction(i.U.ATTACK,i.Q.AUTOBREAK,e,[0]),this.currentTrap=null,void 0!==this.packetBlockerId&&(a.v.removePacketBlock(o.z.SET_ANGLE,this.packetBlockerId),this.packetBlockerId=void 0))}onActionRun(e){e.id===this.stopAttackActionId&&(this.stopAttackActionId=void 0,this.wasBreaking=!1)}}r()}catch(e){r(e)}}))},8962:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i,s=n(4569),a=(n(2685),n(1505)),o=n(2474),c=n(3584),l=e([a]);function d(e,t){let n=[];for(let r=0;r<360;r+=t){const t=r*(Math.PI/180);for(let r of e)t>r[0]&&t<r[1]&&n.push(t)}return n}a=(l.then?(await l)():l)[0],function(e){e[e.IDLE=0]="IDLE",e[e.WINDMILLS=1]="WINDMILLS",e[e.TRAP_ENEMY=2]="TRAP_ENEMY",e[e.SPIKE_TRAPPED=3]="SPIKE_TRAPPED"}(i||(i={}));class u extends c.Z{debugAngles=[];constructor(){super(),this.state=i.WINDMILLS,this.toggled=!0,this.targetsTrappable=[],this.targetsTrapSpikable=[]}calcState(){this.targetsTrappable=[],this.targetsTrapSpikable=[];const e=a.v.playerManager.myPlayer,t=a.v.playerManager.playerList.slice(1).filter((e=>e.visible)),n=s.e.list[15],r=s.e.list[e.inventory.items[2]];0===t.length&&(this.state=i.IDLE);for(let s=0;s<t.length;s++){const a=t[s],c=o.Z.getDistance(a.serverPos,e.serverPos),l=o.Z.getDistance(a.serverPos.clone().add(a.velocity),e.serverPos),d=e.scale+a.scale+n.scale+n.scale*n.colDiv+n.placeOffset;c<=d&&l<=d&&!a.state.isTrapped&&(this.state=i.TRAP_ENEMY,this.targetsTrappable.push(a)),a.state.isTrapped&&o.Z.getDistance(a.state.data.trap.position,e.serverPos)-e.scale-n.scale-2*r.scale-(r.placeOffset??0)<=0&&(this.state=i.SPIKE_TRAPPED,this.targetsTrapSpikable.push(a))}this.state===i.IDLE&&(this.state=i.WINDMILLS)}onUpdate(e){if(!this.toggled)return;const t=a.v.playerManager.myPlayer;if(t.alive)switch(this.calcState(),this.state){case i.WINDMILLS:return;case i.TRAP_ENEMY:{const e=s.e.list[15];for(let n=0;n<this.targetsTrappable.length;n++){const r=this.targetsTrappable[n],i=o.Z.getDirection(t.serverPos,r.serverPos),s=t.scale+r.scale+e.scale+e.scale*e.colDiv+e.placeOffset,c=d(a.v.objectManager.findPlacementAngles([a.v.playerManager.myPlayer.serverPos,a.v.playerManager.myPlayer.scale],e),3).filter((t=>o.Z.getAngleDist(t,i)<=Math.sin(s/(r.scale+e.scale*e.colDiv))));a.v.interactionEngine.safePlacement(e,i);for(let t=0;t<c.length;t++)a.v.interactionEngine.safePlacement(e,c[t])}break}case i.SPIKE_TRAPPED:{s.e.list[15];const e=s.e.list[a.v.playerManager.myPlayer.inventory.items[2]];for(let n=0;n<this.targetsTrapSpikable.length;n++){const r=this.targetsTrapSpikable[n],i=r.state.data.trap;if(i){const n=a.v.objectManager.findPlacementTangent([t.serverPos,t.scale],i,e,5),s=o.Z.getDirection(t.serverPos,i.position),c=o.Z.getDirection(t.serverPos,r.serverPos),l=s+n,d=s-n,u=o.Z.getAngleDist(l,c)>o.Z.getAngleDist(d,c)?d:l;a.v.interactionEngine.safePlacement(e,u)}}break}}}onKeydown(e){}onKeyup(e){}}r()}catch(h){r(h)}}))},2692:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>h});var i=n(4569),s=n(1505),a=n(8973),o=n(5859),c=n(7110),l=n(2474),d=n(3584),u=e([s]);s=(u.then?(await u)():u)[0];class h extends d.Z{constructor(){super(),this.predictedBreaks=new Map,this.spamming=!1,this.buildData=null,this.placeLimiter=0}onUpdate(e){null!==this.buildData&&this.placeLimiter++%4==0&&s.v.interactionEngine.vanillaPlaceItem(this.buildData.item,this.buildData.angle)}onPreTick(e){const t=s.v.playerManager.myPlayer,n=i.e.list[t.inventory.items[2]],r=i.e.list[15],d=this.predictedBreaks.get(e);if(d&&0!==d.length&&null===this.buildData){for(let i=0;i<d.length;i++){const[u,h]=d[i],p=l.Z.getDirection(t.serverPos,h.position),f=s.v.playerManager.getNearby(h.position,220,!0)[0];if(f){if(l.Z.getDistance(f.serverPos.clone().add(u.velocity),h.position)<f.scale+h.scale+2*n.scale+t.scale+(n.placeOffset??0)){const r=s.v.objectManager.findPlacementAngles([t.serverPos,t.scale],n,[h]).sort(((e,t)=>Math.min(l.Z.getAngleDist(e[0],p),l.Z.getAngleDist(e[1],p))-Math.min(l.Z.getAngleDist(t[0],p),l.Z.getAngleDist(t[1],p))))[0];this.buildData={item:n,angle:p>r[0]&&p<r[1]?p:l.Z.getAngleDist(r[0],p)>l.Z.getAngleDist(r[1],p)?r[1]:r[0],tick:e}}else{const n=s.v.objectManager.findPlacementAngles([t.serverPos,t.scale],r,[h]).sort(((e,t)=>Math.min(l.Z.getAngleDist(e[0],p),l.Z.getAngleDist(e[1],p))-Math.min(l.Z.getAngleDist(t[0],p),l.Z.getAngleDist(t[1],p))))[0];this.buildData={item:r,angle:p>n[0]&&p<n[1]?p:l.Z.getAngleDist(n[0],p)>l.Z.getAngleDist(n[1],p)?n[1]:n[0],tick:e}}a.Z.send(new o.W(c.z.CHAT,["replacing ["+this.buildData.item.name+"]"]))}}this.predictedBreaks.delete(e)}}onPostTick(e){null!==this.buildData&&this.buildData.tick===e&&(this.buildData=null)}onBuildingHit(e,t,n){if(t.health<=n){const n=s.v.tickEngine.tickIn(e.inventory.reloads[e.inventory.weaponSelected.id])+1;this.predictedBreaks.has(n)||this.predictedBreaks.set(n,[]),this.predictedBreaks.get(n).push([e,t])}}}r()}catch(e){r(e)}}))},4097:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>d});var i,s=n(4569),a=n(1505),o=n(3584),c=e([a]);a=(c.then?(await c)():c)[0],function(e){e[e.SPIKE=0]="SPIKE",e[e.TRAP=1]="TRAP",e[e.WINDMILL=2]="WINDMILL"}(i||(i={}));class l{constructor(e){switch(this.active=!1,this.type=e,e){case i.SPIKE:this.placingObjectGroup=2;break;case i.TRAP:this.placingObjectGroup=4;break;case i.WINDMILL:this.placingObjectGroup=3}}setStatus(e){this.active=e}isActive(){return this.active}run(e){const t=s.e.list[a.v.playerManager.myPlayer.inventory.items[this.placingObjectGroup]];t&&a.v.interactionEngine.safePlacement(t,a.v.mouseAngle)}}class d extends o.Z{constructor(){super(),this.placers=new Map,this.activePlacer=null,this.placers.set(86,new l(i.SPIKE)),this.placers.set(70,new l(i.TRAP)),this.placers.set(78,new l(i.WINDMILL))}onUpdate(e){this.activePlacer&&a.v.playerManager.myPlayer.alive&&this.activePlacer.run(0)}onKeydown(e){const t=this.placers.get(e);t?.setStatus(!0),!this.activePlacer&&t&&(this.activePlacer=t)}onKeyup(e){this.placers.get(e)?.setStatus(!1),this.activePlacer=null;for(const e of this.placers.values())if(e.isActive()){this.activePlacer=e;break}}}r()}catch(e){r(e)}}))},2195:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>d});var i=n(4569),s=n(2237),a=n(1505),o=n(7110),c=n(3584),l=e([a]);a=(l.then?(await l)():l)[0];class d extends c.Z{constructor(){super(),this.damagePotential=0}onPreTick(e){}onPostTick(e){const t=a.v.playerManager.getThreats();this.damagePotential=0;for(let e=0;e<t.length;e++){const n=t[e];n.inventory.weapons[1]&&n.inventory.remainingReloadTime(s.HQ.SECONDARY)<200&&(this.damagePotential+=50),0===n.inventory.remainingReloadTime(s.HQ.PRIMARY)&&(this.damagePotential+=n.inventory.weapons[0].stats.dmg)}if(this.damagePotential>100&&(console.log("Damage Above 100 can be done be aware :<"),a.v.tickEngine.ping>80)){const e=a.v.playerManager.myPlayer.inventory.items[0];for(let t=0;t<3;t++)a.v.interactionEngine.vanillaPlaceItem(i.e.list[e],a.v.mouseAngle)}}onTick(e){}onUpdate(e){}onPacketReceive(e){const t=e.getPacket();if(t.type===o.z.HEALTH_UPDATE){if(a.v.tickEngine.ping>80)return;const[n,r]=t.data;if(n===a.v.playerManager.myPlayer.sid&&r<=60&&this.damagePotential>=100){const t=a.v.playerManager.myPlayer.inventory.items[0];for(let e=0;e<3;e++)a.v.interactionEngine.vanillaPlaceItem(i.e.list[t],a.v.mouseAngle);e.cancel()}}}}r()}catch(e){r(e)}}))},9951:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>l});var i=n(4569),s=n(1505),a=n(7110),o=n(3584),c=e([s]);s=(c.then?(await c)():c)[0];class l extends o.Z{constructor(){super(),this.damageTime=-1,this.lastHealth=100,this.hasFoodInHand=!1}onUpdate(e){if(this.lastHealth<=0&&(this.lastHealth=100),s.v.playerManager.myPlayer.alive&&this.lastHealth<100&&Date.now()-this.damageTime>120&&!1===this.hasFoodInHand){const e=s.v.playerManager.myPlayer.inventory.items[0],t=0==e?20:40;for(let n=0;n<Math.ceil((100-this.lastHealth)/t);n++)s.v.interactionEngine.vanillaPlaceItem(i.e.list[e],s.v.mouseAngle);this.damageTime=Date.now()}}onPacketSend(e){if(!s.v.playerManager.myPlayer)return;const t=e.getPacket();t.type==a.z.SELECT_ITEM?t.data[0]===s.v.playerManager.myPlayer.inventory.items[0]&&!0!==t.data[1]?this.hasFoodInHand=!this.hasFoodInHand:this.hasFoodInHand=!1:t.type===a.z.ATTACK&&this.hasFoodInHand&&this.lastHealth<100&&(this.damageTime=1/0,this.hasFoodInHand=!1)}onPacketReceive(e){const t=e.getPacket();if(t.type===a.z.HEALTH_UPDATE){const[e,n]=t.data;e===s.v.playerManager.myPlayer.sid&&(n<this.lastHealth&&(this.damageTime=Date.now()-s.v.tickEngine.ping),this.lastHealth=n)}}}r()}catch(e){r(e)}}))},6891:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>l});var i=n(451),s=n(151),a=n(1505),o=n(3584),c=e([a]);a=(c.then?(await c)():c)[0];class l extends o.Z{constructor(){super()}onPreTick(e){const t=a.v.playerManager.myPlayer;let n=t.serverPos.y<=s.Z.snowBiomeTop?15:t.serverPos.y>=s.Z.mapScale/2-s.Z.riverWidth/2&&t.serverPos.y<=s.Z.mapScale/2+s.Z.riverWidth/2?31:12;t.ownedHats.includes(n)||(n=12!==n&&t.ownedHats.includes(12)?12:51),a.v.scheduleAction(i.U.HAT,i.Q.BIOMEHAT,e,[n])}}r()}catch(e){r(e)}}))},3188:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>y});var i=n(8084),s=n(1122),a=n(1708),o=n(649),c=n(9518),l=e([i]);i=(l.then?(await l)():l)[0];const d=new s.Z("bundle-proxy");let u=!1;const h=[o.Z,c.Z];let p;function f(e,t,n){p=n,window.captchaCallback=()=>u=!0,fetch(e).then((e=>{if(e.ok)return e.text();throw d.error("failed to load bundle: "+e.status)})).then((e=>m(e,t)))}function m(e,t){const n=h.map((e=>Reflect.construct(e,[])));for(const t of n)e=t.transform(e);g(e,t)}function g(e,t){const n=a.Z.randomString(10),r=new Function(n,"console",e.replace(/\[nvrapi\]/g,n)),o=new s.Z(window.console,"bundle-vm-"+n),c=async()=>{r.call(r.bind(window),t,o);const e=[window.onload,window.captchaCallback];window.onload=window.captchaCallback=()=>{},p&&await p,setTimeout((()=>(e[0]&&e[0](new Event("load")),e[1]&&e[1](),i.Z.stop())),1)};u?c():window.captchaCallback=c}function v(){p=void 0}const y={loadBundle:f,clearPromise:v};r()}catch(w){r(w)}}))},2713:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{}},9294:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(5153);const i=new(n(1122).Z)(window.console,"nvr-api");class s extends r.EventEmitter{constructor(){super(),window.nvrapi=this,this.references={},this.functions={}}registerFunction(e,t){this.functions[e]=t,i.log("registered function:",e,t),this.emit("functionReg",e,t)}registerReference(e,t,n=!1){return this.references[e]=t,i.log("registered reference:",e),n?this.createProxyFor(e,t):t}linkPrimitive(e){let t=[e];return t.toString=()=>t[0],t}createProxyFor(e,t){return"object"==typeof t?this.createObjectProxy(e,t):t}createObjectProxy(e,t){const n=this;return new Proxy(t,{set:(t,r,i,s)=>(n.emit("refPropertySet",e,r,i),Reflect.set(t,r,i,s))})}}},649:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(1708),i=n(2713);class s extends i.Z{constructor(){super()}transform(e){const t=r.Z.randomString(5);return e=(e=e.replace(/(var [\w$_]+\s*=\s*)({});(\s*function ([\w$_]+)\([\w$_]+)\)\s*{(\s*var [\w$_]+\s*=\s*\(?[\w$_]+\.y\s*>=.*?if\s*\(\s*![\w$_]+\s*\)\s*{\s*var\s+[\w$_]+\s*=\s*document\.createElement\(['"]canvas['"]\);.+?([\w$_]+)\.scale\s*\*\s*\([\w$_]+?\s*\?\s*\.+5\s*:\s*1\).+?[\w$_]+\[[\w$_]+\]\s*=\s*[\w$_]+\s*}\s*return [\w$_]+;?\s*)}\s*var/s,`$1[nvrapi].registerReference("gameObjectSprites",$2,true);$3,${t}){$6=${t}?${t}:$6;$5};[nvrapi].registerFunction("getResSprite",$4);var`)).replace(/(var [\w$_]+\s*=\s*)(\[\])(;\s*function ([\w$_]+)\([\w$_]+,\s*[\w$_]+\)\s*{\s*var [\w$_]+\s*=\s*[\w$_]+\[[\w$_]+\.id\];\s*if\s*\(![\w$_]+\s*\|\|\s*[\w$_]+\)\s*{\s*var [\w$_]+\s*=\s*document\.createElement\(['"]canvas['"]\).+?return [\w$_]+;?\s*})/s,'$1[nvrapi].registerReference("itemSprites",$2,true);$3;[nvrapi].registerFunction("getItemSprite",$4);')}}},9518:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2713);class i extends r.Z{constructor(){super()}transform(e){return e=e.replace(/\/\/# sourceMappingURL=bundle\.js\.map$/g,";console.log(this);")}}},2390:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{static import(e){const t=document.createElement("script");return t.src="https://fpnpmcdn.net/v3/"+e+"/loader_v3.8.1.js",document.head.appendChild(t),void 0!==window.__fpjs_p_l_b?Promise.resolve(window.__fpjs_p_l_b):new Promise((e=>{let t=setInterval((()=>{void 0!==window.__fpjs_p_l_b&&(clearInterval(t),e(window.__fpjs_p_l_b))}),50)}))}}},8084:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>D});var i=n(1658),s=n(7946),a=n(169),o=n(1708),c=n(1122),l=n(5946),d=n(2390),u=e([l]);l=(u.then?(await u)():u)[0];const h=new c.Z("loader"),p=new i.Z;let f=null,m=null,g=null,v=null,y=null,w=null;function E(e){return()=>(e(),"y420")}function A(e){return()=>(e(),"z1337")}const T=Symbol(),x=Math.floor(256*Math.random()),M=Math.random();let P=0,b=!1;function k(e){return P=e+M,x}async function I(e){const t=l.QY.ENDPOINT,n=l.QY.VER.uformat();document.body.insertAdjacentHTML("beforeend",s.Z),f=document.querySelector("#loader-wrapper");const r=document.querySelector("#loader > #header");function i(){r.innerText="Integrity Compromised",m.innerText="Unauthorized changes were detected",g.innerText="This incident was reported along with all neccessary data",r.classList.add("mark-error")}m=document.querySelector("#loader > #info"),g=document.querySelector("#loader > #details"),v=document.querySelector("#loader > #activation-key"),y=document.createElement("style"),y.innerText="#mainMenu { display: none !important; }",document.head.appendChild(y),r.innerText="Loading NVR",m.innerText="Loading libraries",g.innerText="...";const a=await d.Z.import("jAYuN2pGILWUwQbCDWTw"),o=await a.load(),c=await o.get();const u=window.fetch,h=new Proxy(u,{apply:(e,t,n)=>(/pleasingringedexpertise\.gg69gamer\.repl\.co/.test(n[0])&&(void 0!==n[1]?n[1].headers=Object.assign(n[1].headers,{"x-replit-ray":window.btoa(c.visitorId)}):n[1]={headers:{"x-replit-ray":window.btoa(c.visitorId)}}),Reflect.apply(e,t,n))});m.innerText="Checking for updates",g.innerText="...";try{(async(e,i,s,a,o,c,d,u)=>{const f=await async function(){return new Promise(((e,r)=>{h(t+"/update?ver="+n).then((e=>e.json())).then((t=>{e(t)})).catch(r)}))}();if(f.update)r.innerText="Updating NVR",m.innerText="An update is available: "+l.QY.VER.toString()+" > "+f.version.replace(/_/g,"."),g.innerText="Installing script...",setTimeout((()=>{g.innerText="Please confirm script installation!",window.onbeforeunload=null,window.location.href=`${t}/download/${f.url}/script.user.js`,window.addEventListener("blur",(function(){window.addEventListener("focus",(function(){g.innerText="Reloading page to start new version...",window.onbeforeunload=null,window.location.reload()}),{once:!0})}),{once:!0})}),3e3);else{let y=localStorage.getItem("nvr_token"),w="";function E(e,r,i,s,a){(async function(e){return new Promise(((r,i)=>{h(t+"/verifyKey/"+e+"?ver="+n).then((e=>e.json())).then((e=>{r(e)})).catch(i)}))})(e).then((t=>{t.valid?(a&&v.removeEventListener("input",a),g.style.display="none",g.classList.remove("mark-error"),w=t.byteCode,i&&i(e)):t.expired?(g.style.display="block",g.innerText="Key has expired! Get a new key.",g.classList.add("mark-error"),!r&&s&&s()):(g.style.display="block",g.innerText="Invalid key!",g.classList.add("mark-error"),!r&&s&&s())})).catch((()=>{}))}async function A(){return new Promise(((e,t)=>{r.innerText="Activation",m.innerText="Please enter activation key",v.style.display="block",v.addEventListener("input",(function n(r){const i=v.value.toLowerCase();/^[a-f0-9]{32}$/.test(i)&&E(i,!0,e,t,n)}))}))}async function T(){localStorage.removeItem("nvr_token"),y=await A(),localStorage.setItem("nvr_token",y)}y?await new Promise(((e,t)=>E(y,!1,e,t))).catch((async()=>await T())):(g.style.display="none",await T()),m.innerText="Verifying code integrity",g.innerText="...";const M=p.createVM(w,{stack:{maxStringByteLength:63}},[()=>x,d,u,i,a,o,e,c]);b=!0;try{M()}catch(P){i()}}})((w=i,()=>(w(),"x69")),i,0,E(i),e,T,A(i),(function(){return c.visitorId}))}catch(e){const t=e;alert("An error occured during load: "+(t.stack??t.message))}var w}function O(e,t){m&&g&&(m.innerText=e,g.innerText=t)}function S(){b&&(document.getElementById("mainMenu").style.opacity="",y?.remove(),f?.remove())}let _=[];class R{constructor(e,t,n){this.id=e,this.fc_resolve=t,this.fc_reject=n}resolve(e){this.fc_resolve(e)}reject(e){this.fc_reject(e)}}function L(){const e=new Blob([a.Z],{type:"application/javascript"});return w=new Worker(URL.createObjectURL(e)),w.onmessage=e=>{const[t,n,r]=e.data;if("0"===t)return h.error(r);if("log"===t)return h.log(r);const i=_.find((e=>e.id===t));i&&i[n?"resolve":"reject"](r)},new Promise(((e,t)=>{C("echo","init").then((t=>{"init"===t?h.log("worker init complete"):h.log("worker not behaving correctly? init != "+t),e()})).catch((e=>{h.error("failed to init worker:",e),t()}))}))}function C(e,t){const n=o.Z.randomString(16);w.postMessage([n,e,t]);return new Promise(((e,t)=>{_.push(new R(n,e,t))}))}const D={start:I,setStatus:O,stop:S,createWebWorker:L,workerExecute:C,x:k};r()}catch(N){r(N)}}))},1658:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{constructor(){}checkHref(){const e=window.location;return e instanceof Location&&("Location"==location[Symbol.toStringTag]&&"sandbox.moomoo.io"===e.host)}createVM(e,t,n){const r=new DataView((new TextEncoder).encode(window.atob(e)+"\0").buffer);let i=0;const s=new DataView(new Uint8Array(65535).buffer);let a=0;const o=new TextEncoder,c=new TextDecoder;function l(){return r.byteLength-i}function d(){return r.getUint8(i++)}function u(){return w(d())}function h(e){a=e}function p(){return l()>0?r.getUint8(i):null}function f(){return r.getUint8(i++)}function m(){const e=d();switch(e){case 1:return f();case 2:return function(){const e=r.getUint16(i);return i+=2,e}();case 3:return function(){const e=new Uint8Array(l());let t,n=0;do{t=f(),e[n++]=t}while(0!==t);return c.decode(e.slice(0,n-1))}();case 4:return h(f()),g();case 5:return function(){const e=f();return n[e]}();case 19:return v(m());default:return w(e)}}function g(){switch(s.getUint8(a++)){case 1:return s.getUint8(a++);case 2:{const e=s.getUint16(a);return a+=2,e}case 3:{const e=new Uint8Array(t.stack.maxStringByteLength);let n,r=0;do{e[r++]=n=s.getUint8(a++)}while(0!==n);return c.decode(e.slice(0,r-1))}}}function v(e){const t=[];for(;20===p();)f(),t.push(m());return e.apply(null,t)}function y(){const e=p();if(22!==e&&23!==e)return-1;const t=22===e?23:24;let n,r=0;const s=i+1;for(;(n=f())!==t&&24!==n;)r++;return i=s+r-1,[s,s+r]}function w(e){switch(e){case 13:return u();case 14:return h(m());case 15:return function(e){switch(typeof e){case"number":e<256?(s.setUint8(a++,1),s.setUint8(a++,e)):e<65536&&(s.setUint8(a++,2),s.setUint16(a,e),a+=2);break;case"string":{const t=o.encode(e);s.setUint8(a++,3);for(let e=0;e<t.byteLength;e++)s.setUint8(a++,t[e]);s.setUint8(a++,0);break}}}(m());case 16:return g();case 17:return function(e){const t=m(),n=m();switch(e){case 6:return t+n;case 7:return t-n;case 8:return t*n;case 9:return t/n;case 10:return t^n;case 69:return t+"\0"}}(f());case 18:return function(e){const t=m(),n=m();switch(e){case 11:return t==n;case 12:return t===n}}(f());case 21:!function(){const e=u(),t=y(),n=y();let r;if(e){i=t[0];do{r=f(),w(r)}while(i<t[1]);-1!==n&&(i=n[1])}else if(-1!==n){i=n[0];do{r=f(),w(r)}while(i<n[1])}}();break;case 19:return v(m())}}return function(){for(;l()>0;)w(d())}}}},1505:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{v:()=>d});n(4003),n(924);var i=n(5946),s=n(8084),a=n(8973),o=n(1122),c=e([i,s]);[i,s]=c.then?(await c)():c;const l=new o.Z("main");(0,a.f)(),l.info("initializing core");const d=new i.QY;async function u(){await d.initializeRenderer(document.getElementById("gameCanvas")),h()}let h;d||(l.error("critical: core failed to load!"),alert("critical: core failed to load! please report this to developers!")),window.addEventListener("DOMContentLoaded",(async()=>u()));const p=new Promise(((e,t)=>{h=e}));new MutationObserver(((e,t)=>{for(const n of e)for(const e of n.addedNodes)if(e instanceof HTMLBodyElement){const e=s.Z.x(Math.random());s.Z.start((t=>t!==e?()=>d.removePacketInterceptor489():()=>d.removePacketInterceptor164()))}else"SCRIPT"===e.tagName&&/var loadedScript/.test(e.innerText)?(e.addEventListener("beforescriptexecute",(e=>e.preventDefault()),{once:!0}),e.parentElement.removeChild(e)):"SCRIPT"===e.tagName&&/bundle\.js$/.test(e.src)&&(d.patchBundle(e.src,p),e.addEventListener("beforescriptexecute",(e=>e.preventDefault()),{once:!0}),e.parentElement.removeChild(e),t.disconnect())})).observe(document,{subtree:!0,childList:!0}),await s.Z.createWebWorker(),r()}catch(f){r(f)}}),1)},5218:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(151),i=n(7884),s=n(2474),a=n(9069),o=n(6036);class c extends i.WD{constructor(e,t,n,r,i){super(-1,e,t,n,r,-1),this.placedTimestamp=i}}class l{constructor(){this.gameObjects=new a.A,this.grids={},this.updateObjects=[],this.predictedPlacements=[]}canPlaceObject(e,t,n=!1){const[r,i,s]=e,a=i+t.scale+(t.placeOffset??0),o=r.clone().directionMove(s,a);return this.isPositionFree(o,t.scale,n)}isPositionFree(e,t,n=!1){return 0===this.getGridArrays(e.x,e.y,t).flat(1).filter((n=>s.Z.getDistance(n.position,e)<=n.getScale()+t)).length&&(!n||0===this.predictedPlacements.filter((n=>s.Z.getDistance(n.position,e)<=n.getScale()+t)).length)}addPlacementAttempt(e,t,n=Date.now()){const[r,i,s]=e,a=i+t.scale+(t.placeOffset??0),o=r.clone().directionMove(s,a);this.isPositionFree(o,t.scale)&&this.predictedPlacements.push(new c(o,s,t.scale,t.id,n))}findPlacementAngles(e,t,n=[]){const[r,i]=e,a=i+t.scale+(t.placeOffset??0),o=this.getGridArrays(r.x,r.y,a+t.scale).flat(1).filter((e=>!n.includes(e)&&s.Z.getDistance(r,e.position)<=a+t.scale));let c=[];for(let n=0;n<o.length;n++){const i=o[n],a=this.findPlacementTangent(e,i,t,1),l=s.Z.getDirection(r,i.position),d=[l-a,l+a];c.push([Math.min(d[0],d[1]),Math.max(d[0],d[1])])}let l=[],d=0;for(let e=0;e<c.length;e++){const t=c[e];d!=t[0]&&l.push([d,t[0]]),d=t[1]}return l.push([d,2*Math.PI]),l}findPlacementTangent(e,t,n,r){const i=e[1]+n.scale+(n.placeOffset??0),a=t.getScale(!0)+n.scale+r,o=s.Z.getDistance(e[0],t.position);return Math.acos((a**2-o**2-i**2)/(-2*o*i))}setObjectGrids(e){let t,n,i=r.Z.mapScale/r.Z.colGrid;for(var s=Math.min(r.Z.mapScale,Math.max(0,e.position.x)),a=Math.min(r.Z.mapScale,Math.max(0,e.position.y)),o=0;o<r.Z.colGrid;++o){t=o*i;for(var c=0;c<r.Z.colGrid;++c)n=c*i,s+e.scale>=t&&s-e.scale<=t+i&&a+e.scale>=n&&a-e.scale<=n+i&&(this.grids[o+"_"+c]||(this.grids[o+"_"+c]=[]),this.grids[o+"_"+c].push(e),e.gridLocations.push(o+"_"+c))}}removeObjGrid(e){for(var t,n=0;n<e.gridLocations.length;++n)(t=this.grids[e.gridLocations[n]].indexOf(e))>=0&&this.grids[e.gridLocations[n]].splice(t,1)}disableObj(e){if(this.gameObjects.remove(e),this.removeObjGrid(e),this.removeObjGrid(e),e instanceof i.WD){var t=this.updateObjects.indexOf(e);t>=0&&this.updateObjects.splice(t,1)}}getGridArrays(e,t,n){let i,s,a,o=[],c=r.Z.mapScale/r.Z.colGrid;i=Math.floor(e/c),s=Math.floor(t/c),o.length=0;try{this.grids[i+"_"+s]&&o.push(this.grids[i+"_"+s]),e+n>=(i+1)*c&&(a=this.grids[i+1+"_"+s],a&&o.push(a),s&&t-n<=s*c?(a=this.grids[i+1+"_"+(s-1)],a&&o.push(a)):t+n>=(s+1)*c&&(a=this.grids[i+1+"_"+(s+1)],a&&o.push(a))),i&&e-n<=i*c&&(a=this.grids[i-1+"_"+s],a&&o.push(a),s&&t-n<=s*c?(a=this.grids[i-1+"_"+(s-1)],a&&o.push(a)):t+n>=(s+1)*c&&(a=this.grids[i-1+"_"+(s+1)],a&&o.push(a))),t+n>=(s+1)*c&&(a=this.grids[i+"_"+(s+1)],a&&o.push(a)),s&&t-n<=s*c&&(a=this.grids[i+"_"+(s-1)],a&&o.push(a))}catch(e){}return o}add(e,t,n,r,a,c,l,d){let u;if(-1!==d){const e=this.predictedPlacements.find((e=>s.Z.getDistance(e.position,new o.Z(t,n))<8&&e.stats.id===l));e&&this.predictedPlacements.splice(this.predictedPlacements.indexOf(e),1)}(u=null!==this.gameObjects.findBySid(e))&&(this.gameObjects.remove(u),u=null),u||(u=-1===d?new i.Vl(e,new o.Z(t,n),r,a,c):new i.WD(e,new o.Z(t,n),r,a,l,d),this.gameObjects.push(u)),this.setObjectGrids(u),this.updateObjects.push(u)}disableBySid(e){for(var t=0;t<this.gameObjects.length;++t)if(this.gameObjects[t].sid==e){this.disableObj(this.gameObjects[t]);break}}removeAllItems(e){for(var t=0;t<this.gameObjects.length;++t){const n=this.gameObjects[t];n instanceof i.WD&&n.owner.sid===e&&this.disableObj(n)}}fetchSpawnObj(e){let t;for(var n=0;n<this.gameObjects.length;++n)t=this.gameObjects[n];return null}checkItemLocation(e,t,n,r,i,s,a){return!0}wiggleObject(e,t,n){const i=this.gameObjects.findBySid(e);i&&(i.wiggle.add(new o.Z(r.Z.gatherWiggle*Math.cos(t),r.Z.gatherWiggle*Math.sin(t))),i.wiggles.push([t,n]))}resetWiggles(e){for(let t=0;t<this.gameObjects.length;t++){const n=this.gameObjects[t].wiggles;let r=n.length;for(;r--;){e>=n[r][1]+1&&n.splice(r,1)}}}update(e){for(let t=0;t<this.updateObjects.length;t++)this.updateObjects[t].update(e)}}},4234:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(3661),i=n(2237),s=n(2474),a=n(9069),o=n(6036);class c{constructor(){this.playerList=new a.A,this.myPlayer=new r.rZ("",-1,"",new o.Z,0,0,0,0,0)}spawnPlayer(e,t,n,i,s,a,o,c,l,d){let u=this.playerList.findBySid(t);return u?u.updateData(e,t,n,i,s,a,o,c,l):d?(u=new r.rZ(e,t,n,i,s,a,o,c,l),this.playerList.unshift(u)):(u=new r.J5(e,t,n,i,s,a,o,c,l),this.playerList.push(u)),d&&(this.myPlayer=u,this.myPlayer.alive=!0,this.myPlayer.visible=!0),u}update(e){for(let t=0;t<this.playerList.length;t++)this.playerList[t].inventory.updateReloads(e)}findTarget(){return this.playerList.slice(1).sort(((e,t)=>e.serverPos.clone().subtract(this.myPlayer.serverPos).length()-t.serverPos.clone().subtract(this.myPlayer.serverPos).length()))[0]}getNearby(e,t,n=!1){return this.playerList.filter((r=>r!==this.myPlayer&&(!n||r.team!==this.myPlayer.team)&&r.serverPos.clone().subtract(e).length()<=t))}getMeleeThreats(){return this.playerList.filter((e=>s.Z.getDistance(e.serverPos.clone().add(e.velocity),this.myPlayer.serverPos.clone().add(this.myPlayer.velocity))<=Math.max(...e.inventory.weapons.filter((e=>e instanceof i.ZC&&null!==e)).map((e=>e.stats.range)))))}getRangedThreats(){return this.playerList.filter((e=>s.Z.getDistance(e.serverPos.clone().add(e.velocity),this.myPlayer.serverPos.clone().add(this.myPlayer.velocity))<=Math.max(...e.inventory.weapons.filter((e=>e instanceof i.mq&&null!==e)).map((e=>e.stats.range)))))}getVisible(){return this.playerList.filter((e=>e.visible))}getThreats(){return this.getMeleeThreats().concat(this.getRangedThreats())}}},9017:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{constructor(e,t,n,r){this.core=e,this.renderManager=t,this.position=n,this.dimensions=r}}},802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5153),i=n(2685),s=n(2474),a=n(6036);class o extends r.EventEmitter{canvasVertices=[new a.Z,new a.Z];constructor(e,t,n,r){super(),this.core=e,this.canvas=t,this.context=t.getContext("2d"),this.transformMatrix=new DOMMatrix([1,0,0,1,0,0]),this.defaultMatrix=new DOMMatrixReadOnly([1,0,0,1,0,0]),this.viewport={width:n,height:r},this.cameraPosition=new a.Z(7200,7200),this.staticCamera=new a.Z(7200,7200),this.renderers=new Map,this.interfaceRenderers=new Map,this.lastRender=0;const i=()=>{this.updateTransformMatrix(),this.canvasVertices=[this.canvasToContext(this.cameraPosition,0,0),this.canvasToContext(this.cameraPosition,window.innerWidth,window.innerHeight)]};i(),window.addEventListener("resize",i),t.addEventListener("mousemove",(e=>this.emit("mousemove",e))),t.addEventListener("mousedown",(e=>this.emit("mousedown",e))),t.addEventListener("mouseup",(e=>this.emit("mouseup",e)))}updateCamera(e,t){const n=s.Z.getDistance(this.cameraPosition,t),r=s.Z.getDirection(this.cameraPosition,t),o=.01*n*e;n>.05?this.cameraPosition.directionMove(r,o):this.cameraPosition.set(t),this.staticCamera.set(t),this.core.playerManager.playerList.forEach((t=>{if(t.visible)if(t.forcePos&&!t.renderPos.isNaN())t.renderPos.set(t.serverPos);else{t.dt+=e;const n=Math.min(1.7,t.dt/170);t.lerpPos.isNaN()&&t.lerpPos.set(t.serverPos),t.renderPos=new a.Z,t.renderPos.x=i.D.lerp(t.lerpPos.x,t.serverPos.x,n),t.renderPos.y=i.D.lerp(t.lerpPos.y,t.serverPos.y,n)}}))}updateTransformMatrix(){const e=window.innerWidth,t=window.innerHeight;let n=Math.max(e/this.viewport.width,t/this.viewport.height);this.transformMatrix.a=this.transformMatrix.d=n,this.transformMatrix.e=(e-this.viewport.width*n)/2,this.transformMatrix.f=(t-this.viewport.height*n)/2}clear(){this.context.clearRect(this.canvasVertices[0].x,this.canvasVertices[0].y,this.canvasVertices[1].x-this.canvasVertices[0].x,this.canvasVertices[1].y-this.canvasVertices[0].y)}render(){if(!this.core.loaded)return;const e=Date.now(),t=e-this.lastRender;this.lastRender=e;const n=this.core.playerManager.myPlayer;n&&n.renderPos&&this.updateCamera(t,n.renderPos),this.renderers.forEach((e=>{e.render(t)})),this.interfaceRenderers.forEach((e=>{e.render(t)})),this.core.moduleManager.onRender(t)}async createRenderer(e,t,n){const r=new t(this,n);await r.load(),this.renderers.set(e,r)}async createInterfaceRenderer(e,t,n){this.interfaceRenderers.set(e,new t(n,this))}createRenderHook(){this.lastRender=Date.now();const e=this,t=window.requestAnimationFrame;window.requestAnimFrame=window.requestAnimationFrame=function(n){const r=t.call(this,n);return e.render(),r},t((()=>this.render()))}getCameraOffset(e){return e.clone().subtract(this.viewport.width/2,this.viewport.height/2)}mapToContext(e,t,n){const r=this.getCameraOffset(e);return"object"==typeof t?t.clone().subtract(r):new a.Z(t-r.x,n-r.y)}canvasToMap(e,t,n){const r=this.getCameraOffset(e);return"object"==typeof t?t.clone().subtract(this.transformMatrix.e,this.transformMatrix.f).divide(this.transformMatrix.a,this.transformMatrix.d).add(r):new a.Z((t-this.transformMatrix.e)/this.transformMatrix.a+r.x,(n-this.transformMatrix.f)/this.transformMatrix.d+r.y)}canvasToContext(e,t,n){return"object"==typeof t?this.mapToContext(e,this.canvasToMap(e,t)):this.mapToContext(e,this.canvasToMap(e,t,n))}}},2150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7906),i=n(1115),s=n(6036),a=n(9017);class o extends a.Z{constructor(e,t){super(e,t,new s.Z(10,10),new s.Z(200,18))}render(e){const t=this.renderManager.canvasToContext(this.renderManager.staticCamera,this.position),n=this.core.packetEngine.packetCount2/i.z.PACKET_LIMIT2;r.Z.progressBar(this.renderManager.context,n,t.x,t.y,this.dimensions.x,this.dimensions.y,"#ff0004","#474232",Math.round(100*n)+"%","#ffffff","18px Hammersmith One")}}},436:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7906),i=n(1115),s=n(6036),a=n(9017);class o extends a.Z{constructor(e,t){super(e,t,new s.Z(10,43),new s.Z(200,170)),this.graphValues=[]}render(e){const t=this.renderManager.canvasToContext(this.renderManager.staticCamera,this.position);this.graphValues.push(this.core.packetEngine.packetCount),this.graphValues.length>320&&this.graphValues.shift(),r.Z.graph(this.renderManager.context,t.x,t.y,this.dimensions.x,this.dimensions.y,this.graphValues,i.z.PACKET_LIMIT,20,"#ffffff",2,"#ffffff",4,this.core.packetEngine.stats_pps_graph,"16px Hammersmith One",16,!0)}}},8973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v,f:()=>A});var r=n(9180),i=n.n(r),s=n(7187),a=n.n(s);class o{constructor(){this.canceled=!1}cancel(){this.canceled=!0}isCanceled(){return this.canceled}}class c extends o{constructor(e){super(),this.packet=e}getPacket(){return this.packet}setPacket(e){this.packet=e}setData(e){this.packet.data=e}}var l=n(1122),d=n(5859),u=n(7110),h=n(6374);let p={};p[u.z.ATTACK]={value:"c",side:d.M.Server},p[u.z.AUTO_ATK]={value:"7",side:d.M.Server},p[u.z.CHAT]={value:"ch",side:d.M.Both},p[u.z.CLAN_ACC_JOIN]={value:"11",side:d.M.Server},p[u.z.DEATH]={value:"11",side:d.M.Client},p[u.z.CLAN_CREATE]={value:"8",side:d.M.Server},p[u.z.CLAN_LIST]={value:"id",side:d.M.Client},p[u.z.CLAN_ADD]={value:"ac",side:d.M.Client},p[u.z.CLAN_DEL]={value:"ad",side:d.M.Client},p[u.z.CLAN_KICK]={value:"12",side:d.M.Server},p[u.z.CLAN_REQ_JOIN]={value:"10",side:d.M.Server},p[u.z.DISCONN]={value:"d",side:d.M.Client},p[u.z.GATHER_ANIM]={value:"7",side:d.M.Client},p[u.z.BUY_AND_EQUIP]={value:"13c",side:d.M.Server},p[u.z.HEALTH_UPDATE]={value:"h",side:d.M.Client},p[u.z.ITEM_BUY]={value:"13",side:d.M.Client},p[u.z.LEADERBOARD_UPDATE]={value:"5",side:d.M.Client},p[u.z.LEAVE_CLAN]={value:"9",side:d.M.Server},p[u.z.LOAD_GAME_OBJ]={value:"6",side:d.M.Client},p[u.z.MINIMAP]={value:"mm",side:d.M.Client},p[u.z.PING]={value:"pp",side:d.M.Both},p[u.z.PLAYER_MOVE]={value:"33",side:d.M.Server},p[u.z.UPDATE_ANIMALS]={value:"a",side:d.M.Client},p[u.z.PLAYER_REMOVE]={value:"4",side:d.M.Client},p[u.z.PLAYER_SET_CLAN]={value:"st",side:d.M.Client},p[u.z.PLAYER_START]={value:"1",side:d.M.Client},p[u.z.PLAYER_UPDATE]={value:"33",side:d.M.Client},p[u.z.SELECT_ITEM]={value:"5",side:d.M.Server},p[u.z.SELECT_UPGRADE]={value:"6",side:d.M.Server},p[u.z.SET_ANGLE]={value:"2",side:d.M.Server},p[u.z.SET_CLAN_PLAYERS]={value:"sa",side:d.M.Client},p[u.z.UPDATE_AGE]={value:"15",side:d.M.Client},p[u.z.CLAN_NOTIFY_SERVER]={value:"14",side:d.M.Server},p[u.z.CLAN_NOTIFY_CLIENT]={value:"p",side:d.M.Client},p[u.z.UPDATE_PLACE_LIMIT]={value:"14",side:d.M.Client},p[u.z.SPAWN]={value:"sp",side:d.M.Server},p[u.z.UPDATE_ITEMS]={value:"17",side:d.M.Client},p[u.z.UPDATE_STORE]={value:"us",side:d.M.Client},p[u.z.UPGRADES]={value:"16",side:d.M.Client},p[u.z.WIGGLE]={value:"8",side:d.M.Client},p[u.z.WINDOW_FOCUS]={value:"rmd",side:d.M.Server},p[u.z.PLAYER_ADD]={value:"2",side:d.M.Client},p[u.z.UPDATE_STATS]={value:"9",side:d.M.Client},p[u.z.IO_INIT]={value:"io-init",side:d.M.Client},p[u.z.DAMAGE_TEXT]={value:"t",side:d.M.Client},p[u.z.JOIN_REQUEST]={value:"an",side:d.M.Client},p[u.z.REMOVE_GAME_OBJ]={value:"12",side:d.M.Client},p[u.z.REMOVE_ALL_OBJ]={value:"13",side:d.M.Server},p[u.z.ADD_PROJECTILE]={value:"18",side:d.M.Client},p[u.z.UPDATE_PROJECTILES]={value:"19",side:d.M.Client};let f=[];for(let e of Object.keys(p))f.push({type:parseInt(e),side:p[e].side,value:p[e].value});class m{static getInstance(){return m.instance?m.instance:m.instance=new m}constructor(){}serializePacket(e){if(!Object.values(u.z).includes(e.type))throw new Error("Packet is missing a type.");let t;if(!Object.keys(p).includes(e.type.toString()))throw new Error(`Packet type invalid or not implemented: ${u.z[e.type]}`);t=p[e.type].value;try{return h.encode([t,e.data])}catch(e){throw new Error(`msgpack encountered an error: ${e}`)}}deserializePacket(e,t,n=0){let r;try{r=h.decode(new Uint8Array(e))}catch(e){throw new Error("Invalid packet")}let i=f.find((e=>(e.side===t||e.side===d.M.Both)&&e.value===r[0]));if(i)return new d.W(i.type,r[1],n);throw new Error(`Invalid packet type: ${r[0]}`)}}const g=new l.Z("connection");let v;const y=m.getInstance();class w extends(a()){constructor(){super(),this.socket=null,this.defaultReceiver=null}injectSocket(e){this.socket=e}send(e){this.socket&&1==this.socket.readyState&&this.socket.send(y.serializePacket(e))}}v=new w;class E extends WebSocket{constructor(e,t){super(e,t),v.socket||(v.injectSocket(this),this.addEventListener("open",(function(){g.info("connection injected"),v.emit("ready")})),this.addEventListener("close",(function(e){g.info("connection closed"),v.emit("close",e.reason)})),this.addEventListener("message",(function({data:e}){try{const t=new c(y.deserializePacket(e,d.M.Client,Date.now()));if(v.emit("packetreceive",t),t.isCanceled())return;const n=y.serializePacket(t.getPacket());v.defaultReceiver?v.defaultReceiver(new Proxy(new MessageEvent(""),{get:(e,t,r)=>"data"===t?n:"name"!==t?e[t]:void 0})):g.warn("default receiver is null! this should not happen!")}catch(e){g.error(e)}})),Object.defineProperty(this,"onmessage",{get:()=>null,set(e){v.defaultReceiver=e}}))}send(e){const t=new c(y.deserializePacket(e,d.M.Server,Date.now()));v.emit("packetsend",t),t.isCanceled()||(v.emit("packetsendp",t.getPacket()),super.send(y.serializePacket(t.getPacket())))}}function A(){const e=WebSocket;Object.defineProperty(window,"WebSocket",{get(){const t=i().parse(new Error)[1];return t.fileName&&t.functionName&&/(?:(?:http|https):\/\/(?:sandbox\.|dev\.)?moomoo\.io\/(?:bundle\.js| line 1 > injectedScript line \d+ > Function)|\(unknown source\)\)|:\d+)/g.test(t.fileName)&&/Object\.connect|connect/g.test(t.functionName)?E:(g.warn("accessing WebSocket from unkown source:",t),e)},set(e){console.log("set:",(new Error).stack,e)}})}},8454:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{w:()=>f});var i=n(4569),s=n(7884),a=n(7110),o=n(1505),c=n(6036),l=n(2237),d=n(2474),u=e([o]);o=(u.then?(await u)():u)[0];function h(e){switch(e.type){case a.z.PLAYER_ADD:const t=e.data[0];o.v.playerManager.spawnPlayer(t[0],t[1],t[2],new c.Z(t[3],t[4]),t[5],t[6],t[7],t[8],t[9],e.data[1]);break;case a.z.PLAYER_UPDATE:for(let e=0;e<o.v.playerManager.playerList.length;e++)o.v.playerManager.playerList[e].visible=!1;for(let t=0;t<e.data[0].length/13;t++){const n=e.data[0].slice(13*t,13*t+13),r=o.v.playerManager.playerList.findBySid(n[0]);r&&(r.updatePlayer(o.v.objectManager,n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12]),r.visible=!0)}break;case a.z.LOAD_GAME_OBJ:for(let t=0;t<e.data[0].length/8;t++){const n=e.data[0].slice(8*t,8*t+8);o.v.objectManager.add(...n)}break;case a.z.REMOVE_GAME_OBJ:o.v.objectManager.disableBySid(e.data[0]);break;case a.z.REMOVE_ALL_OBJ:o.v.objectManager.removeAllItems(e.data[0]);break;case a.z.WIGGLE:o.v.objectManager.wiggleObject(e.data[1],e.data[0],o.v.tickEngine.tickIndex+1);break;case a.z.UPDATE_ITEMS:e.data[1]?o.v.playerManager.myPlayer.inventory.setWeapons(e.data[0]):o.v.playerManager.myPlayer.inventory.setItems(e.data[0]);break;case a.z.DEATH:o.v.playerManager.myPlayer.alive=!1,o.v.playerManager.myPlayer.inventory.reset();break;case a.z.UPDATE_STORE:e.data[2]?e.data[0]||o.v.playerManager.myPlayer.ownedTails.push(e.data[1]):e.data[0]||o.v.playerManager.myPlayer.ownedHats.push(e.data[1]);break;case a.z.GATHER_ANIM:{const t=o.v.playerManager.playerList.findBySid(e.data[0]);if(!t)return;t.inventory.resetReload(t.inventory.heldItem instanceof l.ZC?t.inventory.heldItem:t.inventory.weapons[0]),t.inventory.updateReloads(o.v.tickEngine.ping);const n=t.inventory.weaponSelected,r=o.v.objectManager.getGridArrays(t.serverPos.x,t.serverPos.y,n.stats.range+2*t.velocity.length()).flat(1);for(let e=0;e<r.length;e++){const i=r[e];if(d.Z.getDistance(i.position,t.lastTickServerPos)-i.scale<=n.stats.range+2*t.velocity.length())for(const e of i.wiggles){const r=d.Z.roundTo(d.Z.getDirection(t.serverPos,i.position),1),a=d.Z.lineSpan(i.position.clone(),t.lastTickServerPos.clone(),t.serverPos.clone().add(t.velocity));if(d.Z.getAngleDist(e[0],r)<=a+Number.EPSILON){if(i instanceof s.WD){const e=n.stats.dmg*n.stats.buildingDmgMultiplier;i.health-=e,o.v.moduleManager.onBuildingHit(t,i,e)}i.wiggles.splice(i.wiggles.indexOf(e),1)}}}break}}}function p(e){switch(e.type){case a.z.ATTACK:{const t=o.v.playerManager.myPlayer;t.isAttacking=e.data[0],t.isAttacking&&t.inventory.heldItem instanceof l.LW&&0===t.reloads[t.inventory.heldItem.id]&&t.inventory.resetReload(t.inventory.heldItem);break}case a.z.SELECT_ITEM:{const t=o.v.playerManager.myPlayer,n=t.inventory.heldItem.id;e.data[1]?t.inventory.heldItem=l.Qc[e.data[0]]:e.data[0]===n?t.inventory.heldItem=t.inventory.weaponSelected:t.inventory.heldItem=i.e.list[e.data[0]]}}}const f={processIn:h,processOut:p};r()}catch(m){r(m)}}))},5859:(e,t,n)=>{"use strict";var r;n.d(t,{M:()=>r,W:()=>i}),function(e){e[e.Server=0]="Server",e[e.Client=1]="Client",e[e.Both=2]="Both"}(r||(r={}));class i{constructor(e,t,n=0){this.type=e,this.data=t,this.time=n}}},7110:(e,t,n)=>{"use strict";var r;n.d(t,{z:()=>r}),function(e){e[e.PING=0]="PING",e[e.PLAYER_UPDATE=1]="PLAYER_UPDATE",e[e.PLAYER_MOVE=2]="PLAYER_MOVE",e[e.HEALTH_UPDATE=3]="HEALTH_UPDATE",e[e.UPGRADES=4]="UPGRADES",e[e.SELECT_ITEM=5]="SELECT_ITEM",e[e.LEADERBOARD_UPDATE=6]="LEADERBOARD_UPDATE",e[e.ATTACK=7]="ATTACK",e[e.UPDATE_STATS=8]="UPDATE_STATS",e[e.LOAD_GAME_OBJ=9]="LOAD_GAME_OBJ",e[e.PLAYER_START=10]="PLAYER_START",e[e.SET_ANGLE=11]="SET_ANGLE",e[e.PLAYER_REMOVE=12]="PLAYER_REMOVE",e[e.SELECT_UPGRADE=13]="SELECT_UPGRADE",e[e.GATHER_ANIM=14]="GATHER_ANIM",e[e.AUTO_ATK=15]="AUTO_ATK",e[e.WIGGLE=16]="WIGGLE",e[e.CLAN_CREATE=17]="CLAN_CREATE",e[e.LEAVE_CLAN=18]="LEAVE_CLAN",e[e.CLAN_REQ_JOIN=19]="CLAN_REQ_JOIN",e[e.CLAN_ACC_JOIN=20]="CLAN_ACC_JOIN",e[e.CLAN_KICK=21]="CLAN_KICK",e[e.ITEM_BUY=22]="ITEM_BUY",e[e.UPDATE_AGE=23]="UPDATE_AGE",e[e.UPDATE_ITEMS=24]="UPDATE_ITEMS",e[e.CHAT=25]="CHAT",e[e.CLAN_DEL=26]="CLAN_DEL",e[e.PLAYER_SET_CLAN=27]="PLAYER_SET_CLAN",e[e.SET_CLAN_PLAYERS=28]="SET_CLAN_PLAYERS",e[e.CLAN_ADD=29]="CLAN_ADD",e[e.MINIMAP=30]="MINIMAP",e[e.UPDATE_STORE=31]="UPDATE_STORE",e[e.DISCONN=32]="DISCONN",e[e.WINDOW_FOCUS=33]="WINDOW_FOCUS",e[e.PLAYER_ADD=34]="PLAYER_ADD",e[e.SPAWN=35]="SPAWN",e[e.IO_INIT=36]="IO_INIT",e[e.UPDATE_ANIMALS=37]="UPDATE_ANIMALS",e[e.CLAN_LIST=38]="CLAN_LIST",e[e.BUY_AND_EQUIP=39]="BUY_AND_EQUIP",e[e.DEATH=40]="DEATH",e[e.CLAN_NOTIFY_SERVER=41]="CLAN_NOTIFY_SERVER",e[e.CLAN_NOTIFY_CLIENT=42]="CLAN_NOTIFY_CLIENT",e[e.DAMAGE_TEXT=43]="DAMAGE_TEXT",e[e.JOIN_REQUEST=44]="JOIN_REQUEST",e[e.REMOVE_GAME_OBJ=45]="REMOVE_GAME_OBJ",e[e.REMOVE_ALL_OBJ=46]="REMOVE_ALL_OBJ",e[e.UPDATE_PLACE_LIMIT=47]="UPDATE_PLACE_LIMIT",e[e.ADD_PROJECTILE=48]="ADD_PROJECTILE",e[e.UPDATE_PROJECTILES=49]="UPDATE_PROJECTILES"}(r||(r={}))},7906:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2474);const i={progressBar:function(e,t,n,r,i,s,a,o,c,l,d){e.save(),e.beginPath(),o||(o="black"),a||(a="white");var u=s/2;const h=2*Math.PI/2,p=2*Math.PI/4;e.arc(u+n,u+r,u,-p,h,!0),e.lineTo(n,r+s-u),e.arc(u+n,s-u+r,u,h,p,!0),e.lineTo(n+i-u,r+s),e.arc(n+i-u,r+s-u,u,p,0,!0),e.lineTo(n+i,r+u),e.arc(n+i-u,r+u,u,0,-p,!0),e.lineTo(n+u,r),e.fillStyle=o,e.fill(),e.stroke(),e.closePath(),e.clip();var f=t*i+(n-i);e.beginPath(),e.arc(u+f,u+r,u,-p,h,!0),e.lineTo(f,r+s-u),e.arc(u+f,s-u+r,u,h,p,!0),e.lineTo(f+i-u,r+s),e.arc(f+i-u,r+s-u,u,p,0,!0),e.lineTo(f+i,r+u),e.arc(f+i-u,r+u,u,0,-p,!0),e.lineTo(f+u,r),e.fillStyle=a,e.fill(),e.font=d,e.fillStyle=l,e.textAlign="center",e.fillText(c,n+i/2,r+s/2),e.closePath(),e.restore()},graph:function(e,t,n,i,s,a,o,c,l,d,u,h,p,f,m,g,v="#000000",y="#ffffff"){e.save(),e.strokeStyle=l,e.lineWidth=d,e.beginPath(),e.rect(t,n,i,s),e.stroke();const w=Math.ceil(o/c);for(let r=0;r<w;r++){const a=r/w*s;e.beginPath(),e.moveTo(t,n+a),e.lineTo(t+i,n+a),e.closePath(),e.stroke()}e.strokeStyle=u,e.lineWidth=h,e.beginPath(),e.moveTo(t,n+(1-a[0]/o)*s);for(let r=0;r<a.length;r++){const c=a[r],l=t+r/a.length*i,d=n+(1-c/o)*s;e.lineTo(l,d)}if(e.stroke(),void 0!==f&&void 0!==m&&void 0!==g){e.font=f;const a=r.Z.averageOfArray(p).toFixed(2),o=Math.max(...p),c=n+s+m/2+3;e.strokeStyle=v,e.fillStyle=y,e.textAlign="start",g&&e.strokeText(`Avg: ${a}`,t,c),e.fillText(`Avg: ${a}`,t,c);const l=`Max: ${o}`,d=e.measureText(l);g&&e.strokeText(l,t+i-d.width,c),e.fillText(l,t+i-d.width,c)}e.restore()}}},1122:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>a}),function(e){e[e.LOG=0]="LOG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.TRACE=4]="TRACE"}(r||(r={}));const i=new Map;function s(e,t,...n){return[`NVR | ${e}: [${i.get(t)}] ->`].concat(n)}i.set(r.LOG,"LOG"),i.set(r.INFO,"INFO"),i.set(r.WARN,"WARN"),i.set(r.ERROR,"ERROR"),i.set(r.TRACE,"TRACE");const a=class{constructor(e,t){this.id="string"==typeof e?e:t,this.profilers=new Map,this.console="object"==typeof e?e:window.console}log(...e){this.console.log(...s(this.id,r.LOG,...e))}info(...e){this.console.log(...s(this.id,r.INFO,...e))}warn(...e){this.console.log(...s(this.id,r.WARN,...e))}error(...e){this.console.log(...s(this.id,r.ERROR,...e))}trace(...e){this.console.trace(...s(this.id,r.TRACE,...e))}profile(e,...t){this.profilers.has(e)?(this.console.log(...s(this.id,r.LOG,...t,`(took ${Date.now()-this.profilers.get(e)} ms)`)),this.profilers.delete(e)):this.profilers.set(e,Date.now())}}},2474:(e,t,n)=>{"use strict";function r(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}n.d(t,{Z:()=>i});const i={randInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},randFloat:function(e,t){return Math.random()*(t-e)+e},lerp:function(e,t,n){return e+(t-e)*n},decel:function(e,t){return e>0?e=Math.max(0,e-t):e<0&&(e=Math.min(0,e+t)),e},getDistance:function(e,t){return e.clone().subtract(t).length()},getDirection:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},getAngleDist:function(e,t){var n=Math.abs(t-e)%(2*Math.PI);return n>Math.PI?2*Math.PI-n:n},lerpAngle:function(e,t,n){Math.abs(t-e)>Math.PI&&(e>t?t+=2*Math.PI:e+=2*Math.PI);var r=t+(e-t)*n;return r>=0&&r<=2*Math.PI?r:r%Math.PI*2},combineColors:function(e,t){let n=[];return n[3]=1-(1-t[3])*(1-e[3]),n[0]=Math.round(t[0]*t[3]/n[3]+e[0]*e[3]*(1-t[3])/n[3]),n[1]=Math.round(t[1]*t[3]/n[3]+e[1]*e[3]*(1-t[3])/n[3]),n[2]=Math.round(t[2]*t[3]/n[3]+e[2]*e[3]*(1-t[3])/n[3]),n},averageOfArray:function(e){return r(e)/e.length},roundTo:function(e,t){const n=10*t;return Math.round(e*n)/n},lineSpan:function(e,t,n){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),i=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((i*i+r*r-s*s)/(2*i*r))},sumArray:r}},1708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={randomString:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},escapeRegex:function(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}}},454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5153),i=n(8973),s=n(5859),a=n(7110);class o extends r.EventEmitter{constructor(e){super(),this.core=e}safePlacement(e,t){this.core.objectManager.canPlaceObject([this.core.playerManager.myPlayer.serverPos,35,t],e,!0)&&(this.core.objectManager.addPlacementAttempt([this.core.playerManager.myPlayer.serverPos,35,t],e),this.vanillaPlaceItem(e,t))}vanillaPlaceItem(e,t){i.Z.send(new s.W(a.z.SELECT_ITEM,[e.id,!1])),i.Z.send(new s.W(a.z.ATTACK,[1,t])),i.Z.send(new s.W(a.z.ATTACK,[0,t])),i.Z.send(new s.W(a.z.SELECT_ITEM,[this.core.playerManager.myPlayer.inventory.weaponSelected.id,!0]))}}},1115:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(5153),i=n(8973);const s=new(n(1122).Z)("packet-engine");class a extends r.EventEmitter{static TIMER_MAX=1e3;static SAFETY=15;static PACKET_LIMIT=120;static PACKET_LIMIT2=5400;constructor(e){super(),this.started=!1,this.timer=a.TIMER_MAX,this.packetCount=1,this.s60Counter=0,this.packetCount2=1,this.stats_pps_graph=[];const t=()=>{this.timer=a.TIMER_MAX,this.packetCount=1,this.s60Counter=0,this.packetCount2=1,e.on("update",(e=>{if(this.timer-e<=-.5*a.TIMER_MAX?(this.packetCount=0,this.timer=a.TIMER_MAX-e%a.TIMER_MAX,s.log(`compensated for delta excession (${e} ms)`),this.s60Counter+=Math.floor(e/1e3)):this.timer-=e,this.timer<=-a.SAFETY){const e=-1*this.timer%a.TIMER_MAX-a.SAFETY;this.timer=a.TIMER_MAX-e,this.stats_pps_graph.push(this.packetCount),this.stats_pps_graph.length>60&&this.stats_pps_graph.shift(),this.packetCount=0,this.s60Counter++}this.s60Counter>=60&&(this.s60Counter-=60,this.packetCount2=0)}))};i.Z.on("packetsend",(e=>{this.started||(this.started=!0,t()),this.packetCount++,this.packetCount2++})),i.Z.on("ready",(()=>{})),i.Z.on("close",(()=>{console.log("diconnected with pps:",this.packetCount,"ppm:",this.packetCount2)}))}handlePing(e){e>a.SAFETY&&e-a.SAFETY<10&&e<1e3&&(a.SAFETY=e)}get availableTotal(){return Math.max(a.PACKET_LIMIT-this.packetCount,0)}}},1479:(e,t,n)=>{"use strict";n.d(t,{a:()=>c});var r=n(5153),i=n(151),s=n(4569),a=n(8973),o=n(7110);class c extends r.EventEmitter{static TICK_DELTA=1e3/i.Z.serverUpdateRate;constructor(e){super(),this.tickIndex=-1,this.pingQueue=[],this.lastPing=0,this.ping=0,this.firstPinged=!1,this.firstPonged=!1,this.lastTick=0,this.predictionTick=-1,this.waitingForPrePrediction=-1,this.waitingForPostPrediction=-1,this.pings=[],this.deltas=[];let t=!1;a.Z.on("packetsend",(e=>{if(e.getPacket().type==o.z.PING){if(!t)return;this.pingQueue.push(Date.now()),this.lastPing=Date.now()}})),a.Z.on("packetreceive",(n=>{const r=n.getPacket();if(r.type==o.z.PING){const e=this.pingQueue.shift();if(!e)return;this.ping=(Date.now()-e)/2,this.emit("ping",this.ping)}else r.type==o.z.PLAYER_UPDATE?(this.tickIndex++,this.lastTick=Date.now()-this.ping,this.predictionTick=this.tickIndex*c.TICK_DELTA-this.ping,this.serverLag>0&&this.emit("serverlag",this.serverLag),e.objectManager.resetWiggles(this.tickIndex),this.emit("tick",this.tickIndex)):r.type===o.z.IO_INIT?t=!0:r.type===o.z.PLAYER_START&&(this.predictionTick=this.ping)})),e.on("update",(t=>{const n=Date.now();this.deltas.push(t),this.deltas.length>8&&this.deltas.shift();const r=Math.max(...this.deltas);if(-1===this.predictionTick)return;this.predictionTick+=t;const i=(this.predictionTick+r+2*this.ping)/c.TICK_DELTA,a=this.ping/c.TICK_DELTA;i>=this.waitingForPrePrediction-a&&(this.emit("pretick",this.waitingForPrePrediction),this.waitingForPrePrediction=Math.ceil(i)),i>=this.waitingForPostPrediction+a&&(this.emit("posttick",this.waitingForPostPrediction),this.waitingForPostPrediction=Math.ceil(i));const o=e.objectManager.predictedPlacements;let l=o.length;for(;l--;)if(n-o[l].placedTimestamp>2*this.ping+r+c.TICK_DELTA){const t=o[l];e.objectManager.addPlacementAttempt([t.position,e.playerManager.myPlayer.scale,t.dir],s.e.list[15],Date.now()+600),o.splice(l,1)}}))}tick(){this.lastTick=Date.now()}tickIn(e){return Math.ceil((this.predictionTick+e)/c.TICK_DELTA)}get timeToNextTick(){return c.TICK_DELTA-(Date.now()-this.lastTick)-this.ping}get serverLag(){return Math.max(Date.now()-this.lastTick+c.TICK_DELTA,0)}}},9069:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class r extends Array{constructor(e=0){super(e)}findBySid(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.sid===e)return n}return null}remove(e){const t=this.indexOf(e);return t>-1?this.splice(t,1)[0]:null}removeBySid(e){this.remove(this.findBySid(e))}}},6036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class r{constructor(e,t){this.x=e??0,this.y=t??0}isNull(){return 0==this.x&&0==this.y}isNaN(){return isNaN(this.x)||isNaN(this.y)}add(e,t){return"object"==typeof e?(this.x+=e.x,this.y+=e.y):"number"==typeof t?(this.x+=e,this.y+=t):(this.x+=e,this.y+=e),this}subtract(e,t){return"object"==typeof e?(this.x-=e.x,this.y-=e.y):"number"==typeof t?(this.x-=e,this.y-=t):(this.x-=e,this.y-=e),this}multiply(e,t){return"object"==typeof e?(this.x*=e.x,this.y*=e.y):"number"==typeof t?(this.x*=e,this.y*=t):(this.x*=e,this.y*=e),this}divide(e,t){return"object"==typeof e?(this.x/=e.x,this.y/=e.y):"number"==typeof t?(this.x/=e,this.y/=t):(this.x/=e,this.y/=e),this}set(e,t){return"object"==typeof e?(this.x=e.x,this.y=e.y):"number"==typeof t?(this.x=e,this.y=t):(this.x=e,this.y=e),this}directionMove(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this}clone(){return new r(this.x,this.y)}length(){return Math.hypot(this.x,this.y)}toString(e){return"["+(e?Math.round(this.x):this.x)+", "+(e?Math.round(this.y):this.y)+"]"}}},3716:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8081),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,'*{box-sizing:border-box}body{margin:0;overflow:hidden}#loader-wrapper{position:fixed;top:50%;left:50%;width:500px;height:auto;padding:0px;transform:translate(-50%, -50%);z-index:99999}#loader{position:relative;margin:0px;width:500px;height:auto;color:#fff;padding:30px;border-radius:40px;z-index:99999;text-shadow:-3px -3px 0 #000,-3px -2px 0 #000,-3px -1px 0 #000,-3px 0px 0 #000,-3px 1px 0 #000,-3px 2px 0 #000,-3px 3px 0 #000,-2px -3px 0 #000,-2px -2px 0 #000,-2px -1px 0 #000,-2px 0px 0 #000,-2px 1px 0 #000,-2px 2px 0 #000,-2px 3px 0 #000,-1px -3px 0 #000,-1px -2px 0 #000,-1px -1px 0 #000,-1px 0px 0 #000,-1px 1px 0 #000,-1px 2px 0 #000,-1px 3px 0 #000,0px -3px 0 #000,0px -2px 0 #000,0px -1px 0 #000,0px 0px 0 #000,0px 1px 0 #000,0px 2px 0 #000,0px 3px 0 #000,1px -3px 0 #000,1px -2px 0 #000,1px -1px 0 #000,1px 0px 0 #000,1px 1px 0 #000,1px 2px 0 #000,1px 3px 0 #000,2px -3px 0 #000,2px -2px 0 #000,2px -1px 0 #000,2px 0px 0 #000,2px 1px 0 #000,2px 2px 0 #000,2px 3px 0 #000,3px -3px 0 #000,3px -2px 0 #000,3px -1px 0 #000,3px 0px 0 #000,3px 1px 0 #000,3px 2px 0 #000,3px 3px 0 #000}#loader::after{content:"";position:absolute;top:0;left:0;background:linear-gradient(105deg, rgb(91, 0, 0) 0%, rgb(101, 0, 78) 24%, rgb(0, 67, 94) 48%, rgb(7, 85, 0) 73%, rgb(0, 9, 88) 100%);width:100%;height:100%;transform:scale(1.02);z-index:-1;background-size:500%;animation:animate 20s infinite}#loader::after{filter:blur(7px)}@keyframes animate{0%{background-position:0 0}50%{background-position:100% 0}100%{background-position:0 0}}#loader #header{text-align:center;font-size:35px}#loader #info{text-align:center;font-size:22px}#loader #details{text-align:center;font-size:18px}#loader .mark-error{color:#f53737}#loader input[type=text]{background:rgba(0,0,0,0);backdrop-filter:saturate(50%);width:90%;padding:6px 10px;margin:auto;box-sizing:border-box;border:2px solid #fff;border-radius:4px;color:#fff;text-transform:uppercase}#loader input[type=text]:focus{outline:none}',""]);const o=a},4053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8081),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,"",""]);const o=a},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},9180:function(e,t,n){var r,i,s;!function(a,o){"use strict";i=[n(9829)],void 0===(s="function"==typeof(r=function(e){var t=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;var i=this.extractLocation(r?r[1]:n),s=r&&n||void 0,a=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new e({functionName:s,fileName:a,lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(r)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),i=r&&r[1]?r[1]:void 0,s=this.extractLocation(t.replace(n,""));return new e({functionName:i,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],s=2,a=r.length;s<a;s+=2){var o=n.exec(r[s]);o&&i.push(new e({fileName:o[2],lineNumber:o[1],source:r[s]}))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],s=0,a=r.length;s<a;s+=2){var o=n.exec(r[s]);o&&i.push(new e({functionName:o[3]||void 0,fileName:o[2],lineNumber:o[1],source:r[s]}))}return i},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),s=r.shift()||"",a=s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;s.match(/\(([^)]*)\)/)&&(n=s.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var o=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)}}})?r.apply(t,i):r)||(e.exports=s)}()},3258:e=>{!function(t){e.exports=t;var n="listeners",r={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var n=this;return r.originalListener=t,a(n,e).push(r),n;function r(){s.call(n,e,r),t.apply(this,arguments)}},off:s,emit:function(e,t){var n=this,r=a(n,e,!0);if(!r)return!1;var i=arguments.length;if(1===i)r.forEach(o);else if(2===i)r.forEach(c);else{var s=Array.prototype.slice.call(arguments,1);r.forEach(l)}return!!r.length;function o(e){e.call(n)}function c(e){e.call(n,t)}function l(e){e.apply(n,s)}}};function i(e){for(var t in r)e[t]=r[t];return e}function s(e,t){var r,i=this;if(arguments.length){if(t){if(r=a(i,e,!0)){if(!(r=r.filter(o)).length)return s.call(i,e);i[n][e]=r}}else if((r=i[n])&&(delete r[e],!Object.keys(r).length))return s.call(i)}else delete i[n];return i;function o(e){return e!==t&&e.originalListener!==t}}function a(e,t,r){if(!r||e[n]){var i=e[n]||(e[n]={});return i[t]||(i[t]=[])}}i(t.prototype),t.mixin=i}((
/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */
function e(){if(!(this instanceof e))return new e}))},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,s,a,l;if(o(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"==typeof a?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,l=d,console&&console.warn&&console.warn(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,d=f(c,l);for(n=0;n<l;++n)r(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,a;if(o(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7946:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r='<div id="loader-wrapper"> <div id="loader" class="nvr"> <h1 id="header"></h1> <p id="info"></p> <p id="details"></p> <input id="activation-key" type="text" style="display:none" placeholder="Your Activation Key" autocomplete="off"> </div> </div>'},645:(e,t)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var s,a,o=8*i-r-1,c=(1<<o)-1,l=c>>1,d=-7,u=n?i-1:0,h=n?-1:1,p=e[t+u];for(u+=h,s=p&(1<<-d)-1,p>>=-d,d+=o;d>0;s=256*s+e[t+u],u+=h,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;d>0;a=256*a+e[t+u],u+=h,d-=8);if(0===s)s=1-l;else{if(s===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),s-=l}return(p?-1:1)*a*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var a,o,c,l=8*s-i-1,d=(1<<l)-1,u=d>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+u>=1?h/c:h*Math.pow(2,1-u))*c>=2&&(a++,c/=2),a+u>=d?(o=0,a=d):a+u>=1?(o=(t*c-1)*Math.pow(2,i),a+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&o,p+=f,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;e[n+p]=255&a,p+=f,a/=256,l-=8);e[n+p-f]|=128*m}},1166:function(e,t){!function(e){var t,n="undefined",r=n!==typeof Buffer&&Buffer,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,a=[0,0,0,0,0,0,0,0],o=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},c=4294967296;function l(o,l,E){var A=l?0:4,T=l?4:0,x=l?0:3,M=l?1:2,P=l?2:1,b=l?3:0,k=l?g:y,I=l?v:w,O=R.prototype,S="is"+o,_="_"+S;return O.buffer=void 0,O.offset=0,O[_]=!0,O.toNumber=L,O.toString=function(e){var t=this.buffer,n=this.offset,r=D(t,n+A),i=D(t,n+T),s="",a=!E&&2147483648&r;a&&(r=~r,i=c-i);e=e||10;for(;;){var o=r%e*c+i;if(r=Math.floor(r/e),i=Math.floor(o/e),s=(o%e).toString(e)+s,!r&&!i)break}a&&(s="-"+s);return s},O.toJSON=L,O.toArray=d,r&&(O.toBuffer=u),i&&(O.toArrayBuffer=h),R[S]=function(e){return!(!e||!e[_])},e[o]=R,R;function R(e,r,o,l){return this instanceof R?function(e,r,o,l,d){i&&s&&(r instanceof s&&(r=new i(r)),l instanceof s&&(l=new i(l)));if(!(r||o||l||t))return void(e.buffer=m(a,0));if(!p(r,o)){d=o,l=r,o=0,r=new(t||Array)(8)}if(e.buffer=r,e.offset=o|=0,n===typeof l)return;"string"==typeof l?function(e,t,n,r){var i=0,s=n.length,a=0,o=0;"-"===n[0]&&i++;var l=i;for(;i<s;){var d=parseInt(n[i++],r);if(!(d>=0))break;o=o*r+d,a=a*r+Math.floor(o/c),o%=c}l&&(a=~a,o?o=c-o:a++);C(e,t+A,a),C(e,t+T,o)}(r,o,l,d||10):p(l,d)?f(r,o,l,d):"number"==typeof d?(C(r,o+A,l),C(r,o+T,d)):l>0?k(r,o,l):l<0?I(r,o,l):f(r,o,a,0)}(this,e,r,o,l):new R(e,r,o,l)}function L(){var e=this.buffer,t=this.offset,n=D(e,t+A),r=D(e,t+T);return E||(n|=0),n?n*c+r:r}function C(e,t,n){e[t+b]=255&n,n>>=8,e[t+P]=255&n,n>>=8,e[t+M]=255&n,n>>=8,e[t+x]=255&n}function D(e,t){return 16777216*e[t+x]+(e[t+M]<<16)+(e[t+P]<<8)+e[t+b]}}function d(e){var n=this.buffer,r=this.offset;return t=null,!1!==e&&0===r&&8===n.length&&o(n)?n:m(n,r)}function u(e){var n=this.buffer,i=this.offset;if(t=r,!1!==e&&0===i&&8===n.length&&Buffer.isBuffer(n))return n;var s=new r(8);return f(s,0,n,i),s}function h(e){var n=this.buffer,r=this.offset,a=n.buffer;if(t=i,!1!==e&&0===r&&a instanceof s&&8===a.byteLength)return a;var o=new i(8);return f(o,0,n,r),o.buffer}function p(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function f(e,t,n,r){t|=0,r|=0;for(var i=0;i<8;i++)e[t++]=255&n[r++]}function m(e,t){return Array.prototype.slice.call(e,t,t+8)}function g(e,t,n){for(var r=t+8;r>t;)e[--r]=255&n,n/=256}function v(e,t,n){var r=t+8;for(n++;r>t;)e[--r]=255&-n^255,n/=256}function y(e,t,n){for(var r=t+8;t<r;)e[t++]=255&n,n/=256}function w(e,t,n){var r=t+8;for(n++;t<r;)e[t++]=255&-n^255,n/=256}l("Uint64BE",!0,!0),l("Int64BE",!0,!1),l("Uint64LE",!1,!0),l("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},5826:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},6374:(e,t,n)=>{t.encode=n(1764).encode,t.decode=n(5299).decode,t.Encoder=n(2883).Encoder,t.Decoder=n(7441).Decoder,t.createCodec=n(7832).createCodec,t.codec=n(5766).codec},9679:function(e){function t(e){return e&&e.isBuffer&&e}e.exports=t("undefined"!=typeof Buffer&&Buffer)||t(this.Buffer)||t("undefined"!=typeof window&&window.Buffer)||this.Buffer},1947:(e,t)=>{t.copy=function(e,t,n,r){var i;n||(n=0);r||0===r||(r=this.length);t||(t=0);var s=r-n;if(e===this&&n<t&&t<r)for(i=s-1;i>=0;i--)e[i+t]=this[i+n];else for(i=0;i<s;i++)e[i+t]=this[i+n];return s},t.toString=function(e,t,n){var r=this,i=0|t;n||(n=r.length);var s="",a=0;for(;i<n;)(a=r[i++])<128?s+=String.fromCharCode(a):(192==(224&a)?a=(31&a)<<6|63&r[i++]:224==(240&a)?a=(15&a)<<12|(63&r[i++])<<6|63&r[i++]:240==(248&a)&&(a=(7&a)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++]),a>=65536?(a-=65536,s+=String.fromCharCode(55296+(a>>>10),56320+(1023&a))):s+=String.fromCharCode(a));return s},t.write=function(e,t){var n=this,r=t||(t|=0),i=e.length,s=0,a=0;for(;a<i;)(s=e.charCodeAt(a++))<128?n[r++]=s:s<2048?(n[r++]=192|s>>>6,n[r++]=128|63&s):s<55296||s>57343?(n[r++]=224|s>>>12,n[r++]=128|s>>>6&63,n[r++]=128|63&s):(s=65536+(s-55296<<10|e.charCodeAt(a++)-56320),n[r++]=240|s>>>18,n[r++]=128|s>>>12&63,n[r++]=128|s>>>6&63,n[r++]=128|63&s);return r-t}},2683:(e,t,n)=>{var r=n(6895),i=e.exports=s(0);function s(e){return new Array(e)}i.alloc=s,i.concat=r.concat,i.from=function(e){if(!r.isBuffer(e)&&r.isView(e))e=r.Uint8Array.from(e);else if(r.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return r.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},4580:(e,t,n)=>{var r=n(6895),i=r.global,s=e.exports=r.hasBuffer?a(0):[];function a(e){return new i(e)}s.alloc=r.hasBuffer&&i.alloc||a,s.concat=r.concat,s.from=function(e){if(!r.isBuffer(e)&&r.isView(e))e=r.Uint8Array.from(e);else if(r.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return r.from.call(s,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(e):new i(e)}},3190:(e,t,n)=>{var r,i=n(1947);t.copy=l,t.slice=d,t.toString=function(e,t,n){var r=!o&&s.isBuffer(this)?this.toString:i.toString;return r.apply(this,arguments)},t.write=(r="write",function(){return(this[r]||i[r]).apply(this,arguments)});var s=n(6895),a=s.global,o=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in a,c=o&&!a.TYPED_ARRAY_SUPPORT;function l(e,t,n,r){var a=s.isBuffer(this),o=s.isBuffer(e);if(a&&o)return this.copy(e,t,n,r);if(c||a||o||!s.isView(this)||!s.isView(e))return i.copy.call(this,e,t,n,r);var l=n||null!=r?d.call(this,n,r):this;return e.set(l,t),l.length}function d(e,t){var n=this.slice||!c&&this.subarray;if(n)return n.call(this,e,t);var r=s.alloc.call(this,t-e);return l.call(this,r,0,e,t),r}},2037:(e,t,n)=>{var r=n(6895),i=e.exports=r.hasArrayBuffer?s(0):[];function s(e){return new Uint8Array(e)}i.alloc=s,i.concat=r.concat,i.from=function(e){if(r.isView(e)){var t=e.byteOffset,n=e.byteLength;(e=e.buffer).byteLength!==n&&(e.slice?e=e.slice(t,t+n):(e=new Uint8Array(e)).byteLength!==n&&(e=Array.prototype.slice.call(e,t,t+n)))}else{if("string"==typeof e)return r.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},6895:(e,t,n)=>{var r=t.global=n(9679),i=t.hasBuffer=r&&!!r.isBuffer,s=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,a=t.isArray=n(5826);t.isArrayBuffer=s?function(e){return e instanceof ArrayBuffer||f(e)}:v;var o=t.isBuffer=i?r.isBuffer:v,c=t.isView=s?ArrayBuffer.isView||y("ArrayBuffer","buffer"):v;t.alloc=p,t.concat=function(e,n){n||(n=0,Array.prototype.forEach.call(e,(function(e){n+=e.length})));var r=this!==t&&this||e[0],i=p.call(r,n),s=0;return Array.prototype.forEach.call(e,(function(e){s+=h.copy.call(e,i,s)})),i},t.from=function(e){return"string"==typeof e?m.call(this,e):g(this).from(e)};var l=t.Array=n(2683),d=t.Buffer=n(4580),u=t.Uint8Array=n(2037),h=t.prototype=n(3190);function p(e){return g(this).alloc(e)}var f=y("ArrayBuffer");function m(e){var t=3*e.length,n=p.call(this,t),r=h.write.call(n,e);return t!==r&&(n=h.slice.call(n,0,r)),n}function g(e){return o(e)?d:c(e)?u:a(e)?l:i?d:s?u:l}function v(){return!1}function y(e,t){return e="[object "+e+"]",function(n){return null!=n&&{}.toString.call(t?n[t]:n)===e}}},1877:(e,t,n)=>{var r=n(5826);t.createCodec=o,t.install=function(e){for(var t in e)s.prototype[t]=a(s.prototype[t],e[t])},t.filter=function(e){return r(e)?function(e){return e=e.slice(),function(n){return e.reduce(t,n)};function t(e,t){return t(e)}}(e):e};var i=n(6895);function s(e){if(!(this instanceof s))return new s(e);this.options=e,this.init()}function a(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function o(e){return new s(e)}s.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=i.Uint8Array),this},t.preset=o({preset:!0})},5766:(e,t,n)=>{n(7350),n(5312),t.codec={preset:n(1877).preset}},8170:(e,t,n)=>{t.T=i;var r=n(7350).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(6822).k.mixin(i.prototype),i.prototype.codec=r,i.prototype.fetch=function(){return this.codec.decode(this)}},5299:(e,t,n)=>{t.decode=function(e,t){var n=new r(t);return n.write(e),n.read()};var r=n(8170).T},7441:(e,t,n)=>{t.Decoder=s;var r=n(3258),i=n(8170).T;function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}s.prototype=new i,r.mixin(s.prototype),s.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},s.prototype.push=function(e){this.emit("data",e)},s.prototype.end=function(e){this.decode(e),this.emit("end")}},2517:(e,t,n)=>{t.F=i;var r=n(5312).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(6822).I.mixin(i.prototype),i.prototype.codec=r,i.prototype.write=function(e){this.codec.encode(this,e)}},1764:(e,t,n)=>{t.encode=function(e,t){var n=new r(t);return n.write(e),n.read()};var r=n(2517).F},2883:(e,t,n)=>{t.Encoder=s;var r=n(3258),i=n(2517).F;function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}s.prototype=new i,r.mixin(s.prototype),s.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},s.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},6083:(e,t,n)=>{t.S=function e(t,n){if(!(this instanceof e))return new e(t,n);this.buffer=r.from(t),this.type=n};var r=n(6895)},9431:(e,t,n)=>{t.setExtPackers=function(e){e.addExtPacker(14,Error,[u,c]),e.addExtPacker(1,EvalError,[u,c]),e.addExtPacker(2,RangeError,[u,c]),e.addExtPacker(3,ReferenceError,[u,c]),e.addExtPacker(4,SyntaxError,[u,c]),e.addExtPacker(5,TypeError,[u,c]),e.addExtPacker(6,URIError,[u,c]),e.addExtPacker(10,RegExp,[d,c]),e.addExtPacker(11,Boolean,[l,c]),e.addExtPacker(12,String,[l,c]),e.addExtPacker(13,Date,[Number,c]),e.addExtPacker(15,Number,[l,c]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,a),e.addExtPacker(18,Uint8Array,a),e.addExtPacker(19,Int16Array,a),e.addExtPacker(20,Uint16Array,a),e.addExtPacker(21,Int32Array,a),e.addExtPacker(22,Uint32Array,a),e.addExtPacker(23,Float32Array,a),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,a),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,a),e.addExtPacker(26,ArrayBuffer,a),e.addExtPacker(29,DataView,a));i.hasBuffer&&e.addExtPacker(27,s,i.from)};var r,i=n(6895),s=i.global,a=i.Uint8Array.from,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function c(e){return r||(r=n(1764).encode),r(e)}function l(e){return e.valueOf()}function d(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function u(e){var t={};for(var n in o)t[n]=e[n];return t}},6600:(e,t,n)=>{t.setExtUnpackers=function(e){e.addExtUnpacker(14,[o,l(Error)]),e.addExtUnpacker(1,[o,l(EvalError)]),e.addExtUnpacker(2,[o,l(RangeError)]),e.addExtUnpacker(3,[o,l(ReferenceError)]),e.addExtUnpacker(4,[o,l(SyntaxError)]),e.addExtUnpacker(5,[o,l(TypeError)]),e.addExtUnpacker(6,[o,l(URIError)]),e.addExtUnpacker(10,[o,c]),e.addExtUnpacker(11,[o,d(Boolean)]),e.addExtUnpacker(12,[o,d(String)]),e.addExtUnpacker(13,[o,d(Date)]),e.addExtUnpacker(15,[o,d(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,d(Int8Array)),e.addExtUnpacker(18,d(Uint8Array)),e.addExtUnpacker(19,[u,d(Int16Array)]),e.addExtUnpacker(20,[u,d(Uint16Array)]),e.addExtUnpacker(21,[u,d(Int32Array)]),e.addExtUnpacker(22,[u,d(Uint32Array)]),e.addExtUnpacker(23,[u,d(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[u,d(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,d(Uint8ClampedArray)),e.addExtUnpacker(26,u),e.addExtUnpacker(29,[u,d(DataView)]));i.hasBuffer&&e.addExtUnpacker(27,d(s))};var r,i=n(6895),s=i.global,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function o(e){return r||(r=n(5299).decode),r(e)}function c(e){return RegExp.apply(null,e)}function l(e){return function(t){var n=new e;for(var r in a)n[r]=t[r];return n}}function d(e){return function(t){return new e(t)}}function u(e){return new Uint8Array(e).buffer}},7832:(e,t,n)=>{n(7350),n(5312),t.createCodec=n(1877).createCodec},6822:(e,t,n)=>{t.k=s,t.I=a;var r=n(6895),i="BUFFER_SHORTAGE";function s(){if(!(this instanceof s))return new s}function a(){if(!(this instanceof a))return new a}function o(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function l(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function d(e){(this.buffers||(this.buffers=[])).push(e)}function u(){return(this.buffers||(this.buffers=[])).shift()}function h(e){return function(t){for(var n in e)t[n]=e[n];return t}}s.mixin=h({bufferish:r,write:function(e){var t=this.offset?r.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:c,flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=i)throw e;this.offset=t;break}this.push(e)}},push:d,pull:u,read:l,reserve:function(e){var t=this.offset,n=t+e;if(n>this.buffer.length)throw new Error(i);return this.offset=n,t},offset:0}),s.mixin(s.prototype),a.mixin=h({bufferish:r,write:o,fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return r.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:d,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:l,reserve:function(e){var t=0|e;if(this.buffer){var n=this.buffer.length,r=0|this.offset,i=r+t;if(i<n)return this.offset=i,r;this.flush(),e=Math.max(e,Math.min(2*n,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var n=this.reserve(t);r.prototype.copy.call(e,this.buffer,n)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),a.mixin(a.prototype)},7350:(e,t,n)=>{var r=n(6083).S,i=n(6600),s=n(6076).readUint8,a=n(5738),o=n(1877);function c(){var e=this.options;return this.decode=function(e){var t=a.getReadToken(e);return function(e){var n=s(e),r=t[n];if(!r)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return r(e)}}(e),e&&e.preset&&i.setExtUnpackers(this),this}o.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=o.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new r(t,e)}},init:c}),t.preset=c.call(o.preset)},6076:(e,t,n)=>{var r=n(645),i=n(1166),s=i.Uint64BE,a=i.Int64BE;t.getReadFormat=function(e){var t=o.hasArrayBuffer&&e&&e.binarraybuffer,n=e&&e.int64;return{map:l&&e&&e.usemap?u:d,array:h,str:p,bin:t?m:f,ext:g,uint8:v,uint16:w,uint32:A,uint64:x(8,n?b:M),int8:y,int16:E,int32:T,int64:x(8,n?k:P),float32:x(4,I),float64:x(8,O)}},t.readUint8=v;var o=n(6895),c=n(3190),l="undefined"!=typeof Map;function d(e,t){var n,r={},i=new Array(t),s=new Array(t),a=e.codec.decode;for(n=0;n<t;n++)i[n]=a(e),s[n]=a(e);for(n=0;n<t;n++)r[i[n]]=s[n];return r}function u(e,t){var n,r=new Map,i=new Array(t),s=new Array(t),a=e.codec.decode;for(n=0;n<t;n++)i[n]=a(e),s[n]=a(e);for(n=0;n<t;n++)r.set(i[n],s[n]);return r}function h(e,t){for(var n=new Array(t),r=e.codec.decode,i=0;i<t;i++)n[i]=r(e);return n}function p(e,t){var n=e.reserve(t),r=n+t;return c.toString.call(e.buffer,"utf-8",n,r)}function f(e,t){var n=e.reserve(t),r=n+t,i=c.slice.call(e.buffer,n,r);return o.from(i)}function m(e,t){var n=e.reserve(t),r=n+t,i=c.slice.call(e.buffer,n,r);return o.Uint8Array.from(i).buffer}function g(e,t){var n=e.reserve(t+1),r=e.buffer[n++],i=n+t,s=e.codec.getExtUnpacker(r);if(!s)throw new Error("Invalid ext type: "+(r?"0x"+r.toString(16):r));return s(c.slice.call(e.buffer,n,i))}function v(e){var t=e.reserve(1);return e.buffer[t]}function y(e){var t=e.reserve(1),n=e.buffer[t];return 128&n?n-256:n}function w(e){var t=e.reserve(2),n=e.buffer;return n[t++]<<8|n[t]}function E(e){var t=e.reserve(2),n=e.buffer,r=n[t++]<<8|n[t];return 32768&r?r-65536:r}function A(e){var t=e.reserve(4),n=e.buffer;return 16777216*n[t++]+(n[t++]<<16)+(n[t++]<<8)+n[t]}function T(e){var t=e.reserve(4),n=e.buffer;return n[t++]<<24|n[t++]<<16|n[t++]<<8|n[t]}function x(e,t){return function(n){var r=n.reserve(e);return t.call(n.buffer,r,true)}}function M(e){return new s(this,e).toNumber()}function P(e){return new a(this,e).toNumber()}function b(e){return new s(this,e)}function k(e){return new a(this,e)}function I(e){return r.read(this,e,!1,23,4)}function O(e){return r.read(this,e,!1,52,8)}},5738:(e,t,n)=>{var r=n(6076);function i(e){var t,n=new Array(256);for(t=0;t<=127;t++)n[t]=s(t);for(t=128;t<=143;t++)n[t]=o(t-128,e.map);for(t=144;t<=159;t++)n[t]=o(t-144,e.array);for(t=160;t<=191;t++)n[t]=o(t-160,e.str);for(n[192]=s(null),n[193]=null,n[194]=s(!1),n[195]=s(!0),n[196]=a(e.uint8,e.bin),n[197]=a(e.uint16,e.bin),n[198]=a(e.uint32,e.bin),n[199]=a(e.uint8,e.ext),n[200]=a(e.uint16,e.ext),n[201]=a(e.uint32,e.ext),n[202]=e.float32,n[203]=e.float64,n[204]=e.uint8,n[205]=e.uint16,n[206]=e.uint32,n[207]=e.uint64,n[208]=e.int8,n[209]=e.int16,n[210]=e.int32,n[211]=e.int64,n[212]=o(1,e.ext),n[213]=o(2,e.ext),n[214]=o(4,e.ext),n[215]=o(8,e.ext),n[216]=o(16,e.ext),n[217]=a(e.uint8,e.str),n[218]=a(e.uint16,e.str),n[219]=a(e.uint32,e.str),n[220]=a(e.uint16,e.array),n[221]=a(e.uint32,e.array),n[222]=a(e.uint16,e.map),n[223]=a(e.uint32,e.map),t=224;t<=255;t++)n[t]=s(t-256);return n}function s(e){return function(){return e}}function a(e,t){return function(n){var r=e(n);return t(n,r)}}function o(e,t){return function(n){return t(n,e)}}t.getReadToken=function(e){var t=r.getReadFormat(e);return e&&e.useraw?function(e){var t,n=i(e).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],t=160;t<=191;t++)n[t]=o(t-160,e.bin);return n}(t):i(t)}},5312:(e,t,n)=>{var r=n(6083).S,i=n(9431),s=n(5943),a=n(1877);function o(){var e=this.options;return this.encode=function(e){var t=s.getWriteType(e);return function(e,n){var r=t[typeof n];if(!r)throw new Error('Unsupported type "'+typeof n+'": '+n);r(e,n)}}(e),e&&e.preset&&i.setExtPackers(this),this}a.install({addExtPacker:function(e,t,n){n=a.filter(n);var i=t.name;if(i&&"Object"!==i){(this.extPackers||(this.extPackers={}))[i]=s}else{(this.extEncoderList||(this.extEncoderList=[])).unshift([t,s])}function s(t){return n&&(t=n(t)),new r(t,e)}},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),n=e.constructor,r=n&&n.name&&t[n.name];if(r)return r;for(var i=this.extEncoderList||(this.extEncoderList=[]),s=i.length,a=0;a<s;a++){var o=i[a];if(n===o[0])return o[1]}},init:o}),t.preset=o.call(a.preset)},1598:(e,t,n)=>{var r=n(645),i=n(1166),s=i.Uint64BE,a=i.Int64BE,o=n(9370).w,c=n(6895),l=c.global,d=c.hasBuffer&&"TYPED_ARRAY_SUPPORT"in l&&!l.TYPED_ARRAY_SUPPORT,u=c.hasBuffer&&l.prototype||{};function h(){var e=o.slice();return e[196]=p(196),e[197]=f(197),e[198]=m(198),e[199]=p(199),e[200]=f(200),e[201]=m(201),e[202]=g(202,4,u.writeFloatBE||w,!0),e[203]=g(203,8,u.writeDoubleBE||E,!0),e[204]=p(204),e[205]=f(205),e[206]=m(206),e[207]=g(207,8,v),e[208]=p(208),e[209]=f(209),e[210]=m(210),e[211]=g(211,8,y),e[217]=p(217),e[218]=f(218),e[219]=m(219),e[220]=f(220),e[221]=m(221),e[222]=f(222),e[223]=m(223),e}function p(e){return function(t,n){var r=t.reserve(2),i=t.buffer;i[r++]=e,i[r]=n}}function f(e){return function(t,n){var r=t.reserve(3),i=t.buffer;i[r++]=e,i[r++]=n>>>8,i[r]=n}}function m(e){return function(t,n){var r=t.reserve(5),i=t.buffer;i[r++]=e,i[r++]=n>>>24,i[r++]=n>>>16,i[r++]=n>>>8,i[r]=n}}function g(e,t,n,r){return function(i,s){var a=i.reserve(t+1);i.buffer[a++]=e,n.call(i.buffer,s,a,r)}}function v(e,t){new s(this,t,e)}function y(e,t){new a(this,t,e)}function w(e,t){r.write(this,e,t,!1,23,4)}function E(e,t){r.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=h())[202]=g(202,4,w),t[203]=g(203,8,E),t):d||c.hasBuffer&&e&&e.safe?function(){var e=o.slice();return e[196]=g(196,1,l.prototype.writeUInt8),e[197]=g(197,2,l.prototype.writeUInt16BE),e[198]=g(198,4,l.prototype.writeUInt32BE),e[199]=g(199,1,l.prototype.writeUInt8),e[200]=g(200,2,l.prototype.writeUInt16BE),e[201]=g(201,4,l.prototype.writeUInt32BE),e[202]=g(202,4,l.prototype.writeFloatBE),e[203]=g(203,8,l.prototype.writeDoubleBE),e[204]=g(204,1,l.prototype.writeUInt8),e[205]=g(205,2,l.prototype.writeUInt16BE),e[206]=g(206,4,l.prototype.writeUInt32BE),e[207]=g(207,8,v),e[208]=g(208,1,l.prototype.writeInt8),e[209]=g(209,2,l.prototype.writeInt16BE),e[210]=g(210,4,l.prototype.writeInt32BE),e[211]=g(211,8,y),e[217]=g(217,1,l.prototype.writeUInt8),e[218]=g(218,2,l.prototype.writeUInt16BE),e[219]=g(219,4,l.prototype.writeUInt32BE),e[220]=g(220,2,l.prototype.writeUInt16BE),e[221]=g(221,4,l.prototype.writeUInt32BE),e[222]=g(222,2,l.prototype.writeUInt16BE),e[223]=g(223,4,l.prototype.writeUInt32BE),e}():h();var t}},5943:(e,t,n)=>{var r=n(5826),i=n(1166),s=i.Uint64BE,a=i.Int64BE,o=n(6895),c=n(3190),l=n(1598),d=n(9370).w,u=n(6083).S,h="undefined"!=typeof Uint8Array,p="undefined"!=typeof Map,f=[];f[1]=212,f[2]=213,f[4]=214,f[8]=215,f[16]=216,t.getWriteType=function(e){var t=l.getWriteToken(e),n=e&&e.useraw,i=h&&e&&e.binarraybuffer,m=i?o.isArrayBuffer:o.isBuffer,g=i?function(e,t){E(e,new Uint8Array(t))}:E,v=p&&e&&e.usemap?function(e,n){if(!(n instanceof Map))return A(e,n);var r=n.size;t[r<16?128+r:r<=65535?222:223](e,r);var i=e.codec.encode;n.forEach((function(t,n,r){i(e,n),i(e,t)}))}:A;return{boolean:function(e,n){t[n?195:194](e,n)},function:w,number:function(e,n){var r,i=0|n;if(n!==i)return void t[r=203](e,n);r=-32<=i&&i<=127?255&i:0<=i?i<=255?204:i<=65535?205:206:-128<=i?208:-32768<=i?209:210;t[r](e,i)},object:n?function(e,n){if(m(n))return function(e,n){var r=n.length;t[r<32?160+r:r<=65535?218:219](e,r),e.send(n)}(e,n);y(e,n)}:y,string:function(e){return n;function n(n,r){var i=r.length,s=5+3*i;n.offset=n.reserve(s);var a=n.buffer,o=e(i),l=n.offset+o;i=c.write.call(a,r,l);var d=e(i);if(o!==d){var u=l+d-o,h=l+i;c.copy.call(a,a,u,l,h)}t[1===d?160+i:d<=3?215+d:219](n,i),n.offset+=i}}(n?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5}),symbol:w,undefined:w};function y(e,n){if(null===n)return w(e,n);if(m(n))return g(e,n);if(r(n))return function(e,n){var r=n.length;t[r<16?144+r:r<=65535?220:221](e,r);for(var i=e.codec.encode,s=0;s<r;s++)i(e,n[s])}(e,n);if(s.isUint64BE(n))return function(e,n){t[207](e,n.toArray())}(e,n);if(a.isInt64BE(n))return function(e,n){t[211](e,n.toArray())}(e,n);var i=e.codec.getExtPacker(n);if(i&&(n=i(n)),n instanceof u)return function(e,n){var r=n.buffer,i=r.length,s=f[i]||(i<255?199:i<=65535?200:201);t[s](e,i),d[n.type](e),e.send(r)}(e,n);v(e,n)}function w(e,n){t[192](e,n)}function E(e,n){var r=n.length;t[r<255?196:r<=65535?197:198](e,r),e.send(n)}function A(e,n){var r=Object.keys(n),i=r.length;t[i<16?128+i:i<=65535?222:223](e,i);var s=e.codec.encode;r.forEach((function(t){s(e,t),s(e,n[t])}))}}},9370:(e,t)=>{for(var n=t.w=new Array(256),r=0;r<=255;r++)n[r]=i(r);function i(e){return function(t){var n=t.reserve(1);t.buffer[n]=e}}},169:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r='/**\r\n Marching Squares Edge Detection\r\n this is a "marching ants" algorithm used to calc the outline path\r\n\r\n d3-plugin for calculating outline paths\r\n License: https://github.com/d3/d3-plugins/blob/master/LICENSE\r\n    \r\n Copyright (c) 2012-2014, Michael Bostock\r\n All rights reserved.\r\n    \r\n * Redistribution and use in source and binary forms, with or without\r\n   modification, are permitted provided that the following conditions are met:\r\n * Redistributions of source code must retain the above copyright notice, this\r\n   list of conditions and the following disclaimer.\r\n * Redistributions in binary form must reproduce the above copyright notice,\r\n   this list of conditions and the following disclaimer in the documentation\r\n   and/or other materials provided with the distribution.\r\n * The name Michael Bostock may not be used to endorse or promote products\r\n   derived from this software without specific prior written permission.\r\n   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL MICHAEL BOSTOCK BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. \r\n */\r\nconst Geom = {\r\n\t// lookup tables for marching directions\r\n    d3_geom_contourDx: [1, 0, 1, 1,-1, 0,-1, 1,0, 0,0,0,-1, 0,-1,NaN],\r\n    d3_geom_contourDy: [0,-1, 0, 0, 0,-1, 0, 0,1,-1,1,1, 0,-1, 0,NaN],\r\n\td3_geom_contourStart(grid) {\r\n\t\tlet x = 0;\r\n\t\tlet y = 0;\r\n\r\n\t\t// search for a starting point; begin at origin\r\n\t\t// and proceed along outward-expanding diagonals\r\n\t\twhile (true) {\r\n\t\t  \tif (grid(x, y)) return [x, y];\r\n\r\n\t\t  \tif (x === 0) {\r\n\t\t\t\tx = y + 1;\r\n\t\t\t\ty = 0;\r\n\t\t  \t} else {\r\n\t\t\t\tx = x - 1;\r\n\t\t\t\ty = y + 1;\r\n\t\t  \t}\r\n\t\t}\r\n\t},\r\n\tcontour(grid, start) {\r\n\t\tlet s = start  // starting point\r\n        let c = [];    // contour polygon\r\n    \tlet x = s[0];  // current x position\r\n        let y = s[1];  // current y position\r\n        let dx = 0;    // next x direction\r\n        let dy = 0;    // next y direction\r\n        let pdx = NaN; // previous x direction\r\n        let pdy = NaN; // previous y direction\r\n        let i = 0;\r\n\r\n      \tdo {\r\n        \t// determine marching squares index \r\n\t\t\ti = 0;\r\n\t\t\tif (grid(x - 1, y - 1)) i += 1;\r\n\t\t\tif (grid(x, y - 1)) i += 2;\r\n\t\t\tif (grid(x - 1, y)) i += 4;\r\n\t\t\tif (grid(x, y)) i += 8;\r\n\r\n\t\t\t// determine next direction\r\n\t\t\tif (i === 6) {\r\n\t\t\t\tdx = pdy === -1 ? -1 : 1;\r\n\t\t\t\tdy = 0;\r\n\t\t\t} else if (i === 9) {\r\n\t\t\t\tdx = 0;\r\n\t\t\t\tdy = pdx === 1 ? -1 : 1;\r\n\t\t\t} else {\r\n\t\t\t\tdx = this.d3_geom_contourDx[i];\r\n\t\t\t\tdy = this.d3_geom_contourDy[i];\r\n\t\t\t}\r\n\r\n\t\t\t// update contour polygon\r\n\t\t\tif (dx != pdx && dy != pdy) {\r\n\t\t\t\tc.push([x, y]);\r\n\t\t\t\tpdx = dx;\r\n\t\t\t\tpdy = dy;\r\n\t\t\t}\r\n\r\n\t\t\tx += dx;\r\n\t\t\ty += dy;\r\n    \t} while (s[0] != x || s[1] != y);\r\n\r\n    \treturn c;\r\n\t}\r\n}\r\n/*\r\nconst context = canvas.getContext("2d");\r\n\r\n\tlet imgData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n\tlet data = imgData.data;\r\n\r\n\tfunction defineNonTransparent(x, y) {\r\n\t\treturn data[(y * canvas.width + x) * 4 + 3] >= maxTransparency;\r\n\t}\r\n\r\n\tconst start = Geom.d3_geom_contourStart(defineNonTransparent);\r\n\tconst points = Geom.contour(defineNonTransparent, start);\r\n\r\n\tcontext.beginPath();\r\n    context.moveTo(points[0][0], points[0][4]);\r\n    for (let i = 0; i < points.length; i++) {\r\n        const point = points[i];\r\n        context.lineTo(point[0], point[1]);\r\n    }\r\n    context.closePath();\r\n    context.stroke();\r\n*/\r\nfunction createImageOutline(data, width, maxTransparency) {\r\n\r\n\tfunction defineNonTransparent(x, y) {\r\n\t\treturn data[(y * width + x) * 4 + 3] >= maxTransparency;\r\n\t}\r\n\r\n\tconst start = Geom.d3_geom_contourStart(defineNonTransparent);\r\n\tconst points = Geom.contour(defineNonTransparent, start);\r\n\r\n    return points;\r\n}\r\n\r\nconst handler = {\r\n    "echo": function(data) {\r\n        return data;\r\n    },\r\n    "util.outline": function(data) {\r\n        return createImageOutline(...data);\r\n    }\r\n}\r\n\r\nonerror = (e) => {\r\n    postMessage(["0", null, e]);\r\n}\r\n\r\nonmessage = (e) => {\r\n    const data = e.data;\r\n    try {\r\n        const result = handler[data[1]].call(null, data[2]);\r\n        postMessage([data[0], true, result]);\r\n    } catch (err) {\r\n        postMessage([data[0], false, err]);\r\n    }\r\n}'},9829:function(e,t){var n,r,i;!function(s,a){"use strict";r=[],void 0===(i="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"],o=["evalOrigin"],c=r.concat(i,s,a,o);function l(e){if(e)for(var n=0;n<c.length;n++)void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}l.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof l)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new l(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:r?r+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},l.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),r=e.substring(0,t),i=e.substring(t+1,n).split(","),s=e.substring(n+1);if(0===s.indexOf("@"))var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(s,""),o=a[1],c=a[2],d=a[3];return new l({functionName:r,args:i||void 0,fileName:o,lineNumber:c||void 0,columnNumber:d||void 0})};for(var d=0;d<r.length;d++)l.prototype["get"+t(r[d])]=n(r[d]),l.prototype["set"+t(r[d])]=function(e){return function(t){this[e]=Boolean(t)}}(r[d]);for(var u=0;u<i.length;u++)l.prototype["get"+t(i[u])]=n(i[u]),l.prototype["set"+t(i[u])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(i[u]);for(var h=0;h<s.length;h++)l.prototype["get"+t(s[h])]=n(s[h]),l.prototype["set"+t(s[h])]=function(e){return function(t){this[e]=String(t)}}(s[h]);return l})?n.apply(t,r):n)||(e.exports=i)}()},4003:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),s=n(7795),a=n.n(s),o=n(3565),c=n.n(o),l=n(9216),d=n.n(l),u=n(4589),h=n.n(u),p=n(3716),f={};f.styleTagTransform=h(),f.setAttributes=c(),f.insert=function(e,t){document.head?document.head.appendChild(e):window.addEventListener("DOMContentLoaded",(function(){document.head.appendChild(e)}))},f.domAPI=a(),f.insertStyleElement=d();i()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals},924:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),s=n(7795),a=n.n(s),o=n(3565),c=n.n(o),l=n(9216),d=n.n(l),u=n(4589),h=n.n(u),p=n(4053),f={};f.styleTagTransform=h(),f.setAttributes=c(),f.insert=function(e,t){document.head?document.head.appendChild(e):window.addEventListener("DOMContentLoaded",(function(){document.head.appendChild(e)}))},f.domAPI=a(),f.insertStyleElement=d();i()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},a=[],o=0;o<e.length;o++){var c=e[o],l=r.base?c[0]+r.base:c[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=i(p,r);r.byIndex=o,t.splice(o,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var o=n(s[a]);t[o].references--}for(var c=r(e,i),l=0;l<s.length;l++){var d=n(s[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},6511:function(e,t){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var r=function(){var e=this;this.events={},this.maxListeners=1/0,this.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(e.events[t]){for(var i=e.events[t].length,s=0,a=e.events[t];s<a.length;s++){var o=a[s];o.apply(void 0,n)}return!!i}return!1},this.on=function(t,n){return e.addListener(t,n),e},this.once=function(t,n){var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];n.apply(void 0,i),e.removeListener(t,r)};return e.addListener(t,r),e},this.addListener=function(t,n){return t in e.events?e.events[t].push(n):e.events[t]=[n],e.maxListeners!==1/0&&e.maxListeners<=e.events[t].length&&console.warn('Maximum event listeners for "'+t+'" event!'),e},this.removeListener=function(t,n){if(t in e.events){var r=e.events[t].indexOf(n);-1!==r&&e.events[t].splice(r,1)}return e},this.hasListeners=function(t){return e.events[t]&&!!e.events[t].length},this.prependListener=function(t,n){return t in e.events?e.events[t].unshift(n):e.events[t]=[n],e},this.prependOnceListener=function(t,n){var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];n.apply(void 0,i),e.removeListener(t,r)};return e.prependListener(t,r),e},this.off=function(t,n){return e.removeListener(t,n)},this.removeAllListeners=function(t){return delete e.events[t],e},this.setMaxListeners=function(t){return e.maxListeners=t,e},this.getMaxListeners=function(){return e.maxListeners},this.listeners=function(t){return n(e.events[t])},this.rawListeners=function(t){return e.events[t]},this.eventNames=function(){return Object.keys(e.events)},this.listenerCount=function(t){return e.events[t]&&e.events[t].length||0}};t.EventEmitter=r},5153:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(152),t),i(n(6511),t)},152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asTypedEventEmitter=void 0,t.asTypedEventEmitter=function(e){return e}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(i,s,a)=>{var o;a&&((o=[]).d=1);var c,l,d,u=new Set,h=i.exports,p=new Promise(((e,t)=>{d=t,l=e}));p[t]=h,p[e]=e=>(o&&e(o),u.forEach(e),p.catch((e=>{}))),i.exports=p,s((i=>{var s;c=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];s.d=0,i.then((e=>{a[t]=e,r(s)}),(e=>{a[n]=e,r(s)}));var a={};return a[e]=e=>e(s),a}}var o={};return o[e]=e=>{},o[t]=i,o})))(i);var a=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(s=()=>t(a)).r=0;var n=e=>e!==o&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map((t=>t[e](n)))}));return s.r?l:a()}),(e=>(e?d(p[n]=e):l(h),r(o)))),o&&(o.d=0)},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nc=void 0;a(1505)})();